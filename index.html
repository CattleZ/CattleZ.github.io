<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Gorge</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Gorge">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Gorge">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Gorge">
  
    <link rel="alternative" href="/atom.xml" title="Gorge" type="application/atom+xml">
  
  
    <link rel="icon" href="http://7xkj1z.com1.z0.glb.clouddn.com/head.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
      <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("your app_id", "your app_key");</script>
<script src="/js/Counter.js"></script>
  
</head></html>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="../../photo/head.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">He Zhang</a></h1>
		</hgroup>

		
		<p class="header-subtitle">欢迎呀</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="https://me.csdn.net/qq_39536716">CSDN</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="zhihu" target="_blank" href="/1660047480" title="zhihu">zhihu</a>
					        
								<a class="mail" target="_blank" href="/1660047480@qq.com" title="mail">mail</a>
					        
								<a class="qq" target="_blank" href="/1660047480@qq.com" title="qq">qq</a>
					        
								<a class="weibo" target="_blank" href="/1660047480@qq.com" title="weibo">weibo</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">He Zhang</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="../../photo/head.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">He Zhang</h1>
			</hgroup>
			
			<p class="header-subtitle">欢迎呀</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="https://me.csdn.net/qq_39536716">CSDN</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="zhihu" target="_blank" href="/1660047480" title="zhihu">zhihu</a>
			        
						<a class="mail" target="_blank" href="/1660047480@qq.com" title="mail">mail</a>
			        
						<a class="qq" target="_blank" href="/1660047480@qq.com" title="qq">qq</a>
			        
						<a class="weibo" target="_blank" href="/1660047480@qq.com" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-多线程实战之批处理一个文件夹下的文件总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2021/02/05/多线程实战之批处理一个文件夹下的文件总结/" class="article-date">
  	<time datetime="2021-02-05T03:39:28.250Z" itemprop="datePublished">2021-02-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/02/05/多线程实战之批处理一个文件夹下的文件总结/">
        多线程实战之批处理一个文件夹下的文件总结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h2><p>现有4个G的船舶轨迹数据，按照船号存储在一个文件夹下，我需要对这些数据进行处理一下，按照单线程的方式，处理起来有点浪费时间，为了提高效率，提高电脑CPU的利用率，打算将数据使用多线程的方式进行处理一下。</p>
<h2 id="项目代码"><a href="#项目代码" class="headerlink" title="项目代码"></a>项目代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> InitShip;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.nio.Buffer;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	Tool tool = <span class="keyword">new</span> Tool();</span><br><span class="line">	<span class="keyword">private</span>  <span class="keyword">final</span> <span class="keyword">static</span> CountDownLatch countDownL = <span class="keyword">new</span> CountDownLatch(<span class="number">10</span>);</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> fileIndex;</span><br><span class="line">	<span class="keyword">private</span> List&lt;String&gt; fileList;</span><br><span class="line">	<span class="keyword">private</span> String filepath=<span class="string">""</span>;</span><br><span class="line">	<span class="keyword">private</span> String movepath=<span class="string">""</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getFilepath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> filepath;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFilepath</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.filepath = filepath;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMovepath</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> movepath;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMovepath</span><span class="params">(String movepath)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.movepath = movepath;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFileIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> fileIndex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFileIndex</span><span class="params">(<span class="keyword">int</span> fileIndex)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.fileIndex = fileIndex;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getFileList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> fileList;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFileList</span><span class="params">(List&lt;String&gt; fileList)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.fileList = fileList;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;fileList.size();i++) &#123;</span><br><span class="line">			<span class="keyword">if</span>(i%<span class="number">10</span> == fileIndex) &#123;</span><br><span class="line">			<span class="comment">//下面三行代码写逻辑代码的地方，可以将想要更改的文件逻辑添加在这个地方</span></span><br><span class="line">			    List&lt;List&lt;String&gt;&gt;	allList =tool.readFILEN(filepath+fileList.get(i));</span><br><span class="line">				String value = tool.WriteValue(allList);</span><br><span class="line">				<span class="comment">//readFile.renameTo(new File(movepath+readFile.getName()));</span></span><br><span class="line">				tool.writerFile(movepath+fileList.get(i),value);</span><br><span class="line">		&#125;</span><br><span class="line">		countDownL.countDown();</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		String filepath = <span class="string">"C:\\Users\\ouc\\Desktop\\data\\202101perupd_test\\"</span>;</span><br><span class="line">		String movepath = <span class="string">"C:\\Users\\ouc\\Desktop\\data\\202101perupd\\"</span>;</span><br><span class="line">		File file = <span class="keyword">new</span> File(filepath);</span><br><span class="line">		String [] fileList = file.list();</span><br><span class="line">		List&lt;String&gt; fList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;fileList.length;i++) &#123;</span><br><span class="line">			fList.add(fileList[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) &#123;</span><br><span class="line">			FileThread fileThread = <span class="keyword">new</span> FileThread();</span><br><span class="line">			fileThread.setFileIndex(i);</span><br><span class="line">			fileThread.setFileList(fList);</span><br><span class="line">			fileThread.setFilepath(filepath);</span><br><span class="line">			fileThread.setMovepath(movepath);</span><br><span class="line">			fileThread.start();</span><br><span class="line">		&#125;</span><br><span class="line">		countDownL.await();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="相关知识记录"><a href="#相关知识记录" class="headerlink" title="相关知识记录"></a>相关知识记录</h2><h3 id="文件读写操作"><a href="#文件读写操作" class="headerlink" title="文件读写操作"></a>文件读写操作</h3><h3 id="CountDownLatch"><a href="#CountDownLatch" class="headerlink" title="CountDownLatch"></a>CountDownLatch</h3><p>在java.util.concurrent.CountDownLatch;包下的一个工具类，countDownLatch这个类使得一个线程或者多个线程等待其他线程各自执行完毕之后在执行。</p>
<h4 id="两种使用场景"><a href="#两种使用场景" class="headerlink" title="两种使用场景"></a>两种使用场景</h4><ul>
<li>让多个线程等待</li>
<li>让单个线程等待<h4 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数count为计数值</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">CountDownLatch</span><span class="params">(<span class="keyword">int</span> count)</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="主要方法"><a href="#主要方法" class="headerlink" title="主要方法"></a>主要方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//调用await()方法的线程会被挂起，它会等待直到count的值为0的时候才继续执行</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">await</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">//和await()类似，只不过等待一定的时间后count的值还没有变为0的话就继续执行</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">await</span><span class="params">(<span class="keyword">long</span> timeout,TimeUnit unit)</span></span></span><br><span class="line"><span class="function"><span class="comment">//执行将count的值减一</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">countDown</span><span class="params">()</span></span>&#123;&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="让多个线程等待，模拟并发"><a href="#让多个线程等待，模拟并发" class="headerlink" title="让多个线程等待，模拟并发"></a>让多个线程等待，模拟并发</h4><p>并发线程一起执行，例如在指定的时刻进行秒杀，线程准备就绪后，进行等待，直到秒杀时刻的到来，然后一起执行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span>  <span class="keyword">final</span> <span class="keyword">static</span> CountDownLatch countDownL = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			countDownL.await();</span><br><span class="line">			String parter =<span class="string">"["</span>+Thread.currentThread().getName()+<span class="string">"]"</span>;</span><br><span class="line">			System.out.println(parter+<span class="string">"开始执行"</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">new</span> FileThread().start();</span><br><span class="line">		&#125;</span><br><span class="line">		Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">		countDownL.countDown();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="让单个线程等待，多个线程任务完成后，进行汇总合并"><a href="#让单个线程等待，多个线程任务完成后，进行汇总合并" class="headerlink" title="让单个线程等待，多个线程任务完成后，进行汇总合并"></a>让单个线程等待，多个线程任务完成后，进行汇总合并</h4><p>很多时候，并发任务存在前后依赖关系，例如：多个数据操作完成后，需要数据check，这是在多个线程任务完成后，进行汇总合并的场景。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span>  <span class="keyword">final</span> <span class="keyword">static</span> CountDownLatch countDownL = <span class="keyword">new</span> CountDownLatch(<span class="number">5</span>);</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"finish"</span>+Thread.currentThread().getName());</span><br><span class="line">		countDownL.countDown();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++) &#123;</span><br><span class="line">			<span class="keyword">new</span> FileThread().start();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//Thread.sleep(2000);</span></span><br><span class="line">		countDownL.await();</span><br><span class="line">		System.out.println(<span class="string">"主线程:在所有的任务完成后，执行"</span>);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>CountDownLatch是通过一个计数器来实现的，计数器的初始值为线程的数量。<br>调用await()方法的线程会被阻塞，直到计数器减到0的时候，才能继续往下执行。<br>调用await()进行阻塞等待的线程，他们被阻塞，这样所有的线程都能在同一个起跑线上<br>countDown()方法则是将计数器减1;当减为0的时候，就继续往下执行。</p>
<h2 id="项目代码解读"><a href="#项目代码解读" class="headerlink" title="项目代码解读"></a>项目代码解读</h2><p>首先创建了一个CountDownLatch的工具，初始值为10，设置一个文件的index，以及文件路径的列表，该类继承了Thread，因此需要重写run()方法，这里我们要使用的是第二种场景，让单线程，等待多线程的过程，虽然我们后续没有其他任务要继续执行。在run 方法里面，线程开始执行我们编写好的逻辑代码，执行完成一个之后，countDown就会减一，countDownLatch的值设置为全局的，因此，我们创建的10个线程，每次执行都会使得countDown减一，run()方法里面的if(i%10 == fileIndex) 表示了10个线程，需要负责的文件的数量。这样就实现了10个线程同时进行文件操作的过程。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2021/02/05/多线程实战之批处理一个文件夹下的文件总结/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="多线程实战之批处理一个文件夹下的文件总结">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Win10 系统MySQL8.0 忘记管理员密码，重新设置新的密码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2021/02/05/Win10 系统MySQL8.0 忘记管理员密码，重新设置新的密码/" class="article-date">
  	<time datetime="2021-02-05T03:37:13.010Z" itemprop="datePublished">2021-02-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/02/05/Win10 系统MySQL8.0 忘记管理员密码，重新设置新的密码/">
        Win10 系统MySQL8.0 忘记管理员密码，重新设置新的密码
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="首先使用管理员权限登录CMD"><a href="#首先使用管理员权限登录CMD" class="headerlink" title="首先使用管理员权限登录CMD"></a>首先使用管理员权限登录CMD</h2><p>右键系统菜单–&gt;选择Windows PowerShell(管理员)（A）启动管理员cmd</p>
<h2 id="查看现有进程是否含有mysql"><a href="#查看现有进程是否含有mysql" class="headerlink" title="查看现有进程是否含有mysql"></a>查看现有进程是否含有mysql</h2><p>使用tasklist能列出所有的进程，和相应的信息。如果包含Mysql的开头的进程，一律杀死即可<br>tskill能查杀进程，语法很简单：tskill 程序名！！</p>
<h2 id="切换命令行路径到Mysql的bin目录下"><a href="#切换命令行路径到Mysql的bin目录下" class="headerlink" title="切换命令行路径到Mysql的bin目录下"></a>切换命令行路径到Mysql的bin目录下</h2><p>我是一步一步退出在重新进入的。<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; cd ..</span><br><span class="line">PS C:\Windows&gt; cd ..</span><br><span class="line">PS C:\&gt; ls</span><br><span class="line">PS C:\&gt; cd <span class="string">'.\Program Files\'</span></span><br><span class="line">PS C:\Program Files&gt; cd .\MySQL\</span><br><span class="line">PS C:\Program Files\MySQL&gt; cd <span class="string">'.\MySQL Server 8.0\'</span></span><br><span class="line">PS C:\Program Files\MySQL\MySQL Server <span class="number">8.0</span>&gt; cd bin</span><br></pre></td></tr></table></figure></p>
<h2 id="执行跳过权限认证的命令"><a href="#执行跳过权限认证的命令" class="headerlink" title="执行跳过权限认证的命令"></a>执行跳过权限认证的命令</h2><p>8版本与前面的版本不一样，语法上是有区别的，注意区分<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --console --skip-grant-tables --shared-memory</span><br></pre></td></tr></table></figure></p>
<h3 id="错误及处理"><a href="#错误及处理" class="headerlink" title="错误及处理"></a>错误及处理</h3><p>我在运行的时候，出现了下面的错误，错误原因是 console没有安装<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">05</span>T02:<span class="number">45</span>:<span class="number">36.329602</span>Z <span class="number">0</span> [System] [MY-<span class="number">010116</span>] [Server] C:\Program Files\MySQL\MySQL Server <span class="number">8.0</span>\bin\mysqld.exe (mysqld <span class="number">8.0</span>.<span class="number">22</span>) starting as <span class="keyword">process</span> <span class="number">17040</span></span><br><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">05</span>T02:<span class="number">45</span>:<span class="number">36.332291</span>Z <span class="number">0</span> [Warning] [MY-<span class="number">010091</span>] [Server] Can<span class="string">'t create test file C:\Program Files\MySQL\MySQL Server 8.0\data\mysqld_tmp_file_case_insensitive_test.lower-test</span></span><br><span class="line"><span class="string">2021-02-05T02:45:36.332400Z 0 [Warning] [MY-010091] [Server] Can'</span>t create test file C:\Program Files\MySQL\MySQL Server <span class="number">8.0</span>\data\mysqld_tmp_file_case_insensitive_test.lower-test</span><br><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">05</span>T02:<span class="number">45</span>:<span class="number">36.332547</span>Z <span class="number">0</span> [ERROR] [MY-<span class="number">013276</span>] [Server] Failed to set datadir to <span class="string">'C:\Program Files\MySQL\MySQL Server 8.0\data\'</span> (OS errno: <span class="number">2</span> - No such file or directory)</span><br><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">05</span>T02:<span class="number">45</span>:<span class="number">36.346381</span>Z <span class="number">0</span> [ERROR] [MY-<span class="number">010119</span>] [Server] Aborting</span><br><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">05</span>T02:<span class="number">45</span>:<span class="number">36.346516</span>Z <span class="number">0</span> [System] [MY-<span class="number">010910</span>] [Server] C:\Program Files\MySQL\MySQL Server <span class="number">8.0</span>\bin\mysqld.exe: Shutdown complete (mysqld <span class="number">8.0</span>.<span class="number">22</span>)  MySQL Community Server - GPL.</span><br></pre></td></tr></table></figure></p>
<p>下面就对这个错误进行处理哦！</p>
<ul>
<li>首先执行 <code>mysqld --initialize --user=mysql --console</code></li>
<li>执行成功后执行<code>mysqld -install</code>  会提示<code>Service successfully installed.</code></li>
<li>重新执行 <code>mysqld --console --skip-grant-tables --shared-memory</code> 即可。<br>这时候当前这个命令行就不可以使用了。<h2 id="使用管理员权限在重新开一个命令行"><a href="#使用管理员权限在重新开一个命令行" class="headerlink" title="使用管理员权限在重新开一个命令行"></a>使用管理员权限在重新开一个命令行</h2>进入到Mysql的安装目录执行<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Program Files\MySQL\MySQL Server <span class="number">8.0</span>\bin&gt; mysql</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>这时候，就能成功的登录到mysql里面，我们来测试一下，是不是登录成功了</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br></pre></td></tr></table></figure>
<p>可以发现我们已经登录成功。<br>然后执行下面的语句<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;</span><br></pre></td></tr></table></figure></p>
<p>老的版本是执行<code>select user,host,password from user;</code> 但是会报错password是一个无效的字段。在mysql8.0中password已经被替代了<br>因此我们要执行<code>select user,host,authentication_string from user;</code><br>最后执行：<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE mysql.user SET authentication_string=<span class="string">''</span> WHERE user=<span class="string">'root'</span> and host=<span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="关闭两个CMD-重启mysql"><a href="#关闭两个CMD-重启mysql" class="headerlink" title="关闭两个CMD 重启mysql"></a>关闭两个CMD 重启mysql</h2><p>我们关闭刚刚打开的两个管理员登录的cmd，然后在重新使用管理员权限打开一个cmd,输入</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; net start mysql</span><br><span class="line">MySQL 服务正在启动 .</span><br><span class="line">MySQL 服务已经启动成功。</span><br></pre></td></tr></table></figure>
<p>启动成功之后，输入</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Windows\system32&gt; mysql -u root</span><br></pre></td></tr></table></figure>
<p>这时候，我们就进入到了mysql的界面了，在输入</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER USER <span class="string">'root'</span><span class="string">@'localhost' IDENTIFIED BY 'root';</span></span><br><span class="line"><span class="string">Query OK, 0 rows affected (0.01 sec)</span></span><br></pre></td></tr></table></figure>
<p>这里的root 是我设置的测试用户名与密码，要根据自己的自行调整。</p>
<h2 id="使用普通用户权限打开cmd"><a href="#使用普通用户权限打开cmd" class="headerlink" title="使用普通用户权限打开cmd"></a>使用普通用户权限打开cmd</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\ouc&gt;mysql -uroot -p</span><br></pre></td></tr></table></figure>
<p>这样我们就可以使用新的密码成功的登录数据库了！</p>
<h2 id="这里还是要提醒大家，尽量建立一个密码本，可以将密码都记录下来，这样就不用整天这么麻烦的因为这种小事情，捣鼓啦"><a href="#这里还是要提醒大家，尽量建立一个密码本，可以将密码都记录下来，这样就不用整天这么麻烦的因为这种小事情，捣鼓啦" class="headerlink" title="这里还是要提醒大家，尽量建立一个密码本，可以将密码都记录下来，这样就不用整天这么麻烦的因为这种小事情，捣鼓啦"></a>这里还是要提醒大家，尽量建立一个密码本，可以将密码都记录下来，这样就不用整天这么麻烦的因为这种小事情，捣鼓啦</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2021/02/05/Win10 系统MySQL8.0 忘记管理员密码，重新设置新的密码/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="Win10 系统MySQL8.0 忘记管理员密码，重新设置新的密码">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-泛型总结与补充" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2021/01/21/泛型总结与补充/" class="article-date">
  	<time datetime="2021-01-21T07:04:43.630Z" itemprop="datePublished">2021-01-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/21/泛型总结与补充/">
        泛型总结与补充
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>当把对象放进java集合中的时候，集合就会忘记这个对象的数据类型，从而保证了通用性，但是也产生了一些问题。<br>对于java集合，在编译的时候是不检查类型的，因此取出集合的时候是需要进行强制类型转换的，可能会引发ClassCastException异常。JDK5之后，发展起来的。</p>
<p><strong><em>所谓泛型就是在定义类、接口、方法的时候使用类型形参，这个类型形参将在声明变量、创建对象、调用方法的时候使用类型形参，这个类型形参将在声明变量、创建对象、调用方法的时候动态的指定（即传入实际的类型参数、可以称为类型实参）。</em></strong></p>
<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; s = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"><span class="comment">//JDK7之前是不支持的</span></span><br><span class="line">ArrayList&lt;String&gt; s = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>
<ul>
<li>泛型的实质是：允许在定义接口、类时声明类型形参，类型形参在整个接口、类体内可当成类型使用。几乎所有可使用普通类型的地方都可以使用这种类型形参。</li>
<li>类名中添加了泛型之后，在写类的构造器的时候，不需要添加</li>
<li>泛型具有继承性</li>
<li>不管泛型的实际类型参数是什么，他们在运行的时候总有同样的类.在内存中也只占用一块内存，因此在静态方法，静态代码块，静态变量的声明过程中，都不允许使用类型形参。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; s = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  ArrayList&lt;Integer&gt; s2 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  System.out.println(s.getClass()==s2.getClass()); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<ul>
<li>由于系统中并不会真正的生成泛型类，所以instanceof 运算符后不能使用泛型类<h2 id="使用类型通配符"><a href="#使用类型通配符" class="headerlink" title="使用类型通配符"></a>使用类型通配符</h2>为了表示各种类型List的父类，我们使用类型统配符，类型统配符是一个问号（?），将一个问号作为类型实参传给List集合，写作：List&lt;?&gt; (意思是未知类型元素的List)。这个问号（?）被称为统配符，它的元素类型可以匹配任何类型。</li>
</ul>
<p>下面这个程序中使用的时候需要注意，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;?&gt; s = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">  s.add(<span class="keyword">new</span> Object());</span><br><span class="line"><span class="comment">// 这样写会出错的</span></span><br></pre></td></tr></table></figure>
<p>因为，add方法是有类型参数E作为集合的元素类型，所以传递给add的参数必须是E类的对象或者子类，但是添加null是可以的，因为null是所有引用类型的实例。<br>如果调用get方法是可以的，其返回值是一个未知类型，但是可以肯定的是它总是一个Object。</p>
<h2 id="类型通配符的上限"><a href="#类型通配符的上限" class="headerlink" title="类型通配符的上限"></a>类型通配符的上限</h2><p>如果我们不想List&lt;?&gt;是所有类型的父亲类，只想表示它是某一类泛型List的父类。可以使用下面例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// shape是 一个抽象类 ，那么list中就可以使用继承自shape的类</span></span><br><span class="line">List&lt;? extends Shape&gt;</span><br></pre></td></tr></table></figure>
<p>因为我们不知道这个受限制通配符的具体类型，因此，我们也不能将Shape类的子类添加到List中。</p>
<h2 id="设定类型形参的上限"><a href="#设定类型形参的上限" class="headerlink" title="设定类型形参的上限"></a>设定类型形参的上限</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Number 是List 类型形参的上限</span></span><br><span class="line">List&lt;T extends Number&gt;</span><br></pre></td></tr></table></figure>
<h2 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h2><p>我们在定义方法的时候，可以使用类型形参，所谓的泛型方法就是在声明方法的时候定义一个或多个类型形参。使用格式如下：<br><strong>修饰符 &lt;T,S&gt; 返回值类型 方法名(形参列表 ){<br>//方法体<br>}</strong><br>多个形参类型之间以逗号隔开，所有的类型形参声明放在方法修饰和方法返回值类型之间</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">fromArrayTocollection</span><span class="params">(T[] a,Collection&lt;T&gt; c)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(T O : a)&#123;</span><br><span class="line">   c.add(o)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Generical</span> </span>&#123;</span><br><span class="line"> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">addArray</span><span class="params">(T[] a,Collection &lt;T&gt; c)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(T o:a) &#123;</span><br><span class="line">   c.add(o);</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">  Object [] oa = <span class="keyword">new</span> Object[<span class="number">10</span>];</span><br><span class="line">  Collection &lt;Object&gt; coll  = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  addArray(oa,coll);</span><br><span class="line">  String [] ss = <span class="keyword">new</span> String[<span class="number">3</span>];</span><br><span class="line">  Collection&lt;String&gt; coll2 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  addArray(ss,coll2);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法声明的形参只能在该方法里面使用，而接口、类声明中定义的类型形参则可以在整个接口以及类中使用。</p>
<h3 id="泛型方法和类型统配符的区别"><a href="#泛型方法和类型统配符的区别" class="headerlink" title="泛型方法和类型统配符的区别"></a>泛型方法和类型统配符的区别</h3><p>大多数时候都可以使用泛型方法来代替类型统配符。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">containAll</span><span class="params">(Collection&lt;?&gt; c)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span></span></span><br><span class="line"><span class="function">可以 替换成 </span></span><br><span class="line"><span class="function">&lt;T&gt; <span class="keyword">boolean</span> <span class="title">containAll</span><span class="params">(Collection&lt;T&gt; c)</span></span>;</span><br><span class="line">&lt;T extends E&gt; <span class="function"><span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;T&gt; c)</span></span></span><br></pre></td></tr></table></figure>
<p>上面两个方法中类型形参T只使用了一次，类型形参T使用的产生的唯一效果是可以在不同的调用点传入不同的实际类型。类型统配符就是被设计用来支持灵活的子类化的。<br>泛型方法允许类型形参被用来表示方法的一个或多个参数之间的类型依赖关系，或者方法返回值与参数之间的类型依赖关系，如果没有依赖关系就不要使用泛型。</p>
<h3 id="泛型构造器"><a href="#泛型构造器" class="headerlink" title="泛型构造器"></a>泛型构造器</h3><p>Java 允许在构造器签名中声明类型形参。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> &lt;T&gt; Foo(T t)&#123;</span><br><span class="line">  System.out.println(t);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">new</span> Foo(<span class="string">"CEHSI"</span>);</span><br><span class="line">  <span class="keyword">new</span> Foo(<span class="number">20</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="Java7新增加的“菱形”"><a href="#Java7新增加的“菱形”" class="headerlink" title="Java7新增加的“菱形”"></a>Java7新增加的“菱形”</h3><p>前面介绍的Java7新增“菱形”语法，它允许调用构造器时在构造器后使用一对尖括号来代表泛型信息。但如果程序显示指定了泛型构造器中声明的类型形参的实际类型，则不可以使用“菱形”语法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"> <span class="keyword">public</span> &lt;T&gt; Foo(T t)&#123;</span><br><span class="line">  System.out.println(t);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Generical</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">  Foo&lt;String&gt; mc1 = <span class="keyword">new</span> Foo&lt;&gt;(<span class="number">5</span>);</span><br><span class="line">  Foo&lt;String&gt; mc2 = <span class="keyword">new</span> &lt;Integer&gt;Foo&lt;String&gt;(<span class="number">5</span>);</span><br><span class="line">  <span class="comment">//编译会错误 因为即指定了泛型构造器中的类型形参是Integter类型，又想使用“菱形”语法</span></span><br><span class="line">  Foo&lt;String&gt; mc3 = <span class="keyword">new</span> &lt;Integer&gt;Foo&lt;&gt;(<span class="number">5</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="设定统配符下限"><a href="#设定统配符下限" class="headerlink" title="设定统配符下限"></a>设定统配符下限</h3><p>为了表达A元素与B元素相同或者是B元素的父类，这种约束关系，java允许设定统配符的下限&lt;? super Type&gt; 这个统配符表示它必须是Type本身或者是Type 的父类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">copy</span><span class="params">(Collection&lt;? <span class="keyword">super</span> T&gt; dest,Collection&lt;T&gt; src)</span> </span>&#123;</span><br><span class="line">  T last = <span class="keyword">null</span>;</span><br><span class="line">  <span class="keyword">for</span>(T ele : src) &#123;</span><br><span class="line">   last = ele;</span><br><span class="line">   dest.add(ele);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> last;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">  List&lt;Number&gt; ln = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  List&lt;Integer&gt; li = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  li.add(<span class="number">5</span>);</span><br><span class="line">  Integer d = copy(ln,li);</span><br><span class="line">  System.out.println(d);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h4 id="泛型方法与方法重载"><a href="#泛型方法与方法重载" class="headerlink" title="泛型方法与方法重载"></a>泛型方法与方法重载</h4><p>因为泛型既可以允许设定统配符的上限，也允许设定统配符的下限，但是在Jdk-1.8 之后就不支持。这里的jdk1.8是我现在使用的版本。在jdk1.8之前具体到哪一个版本，没有测试。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">copy</span><span class="params">(Collection&lt;T&gt; dest,Collection&lt;? extends T&gt; src)</span> </span>&#123;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">copy</span><span class="params">(Collection&lt;? <span class="keyword">super</span> T&gt; dest,Collection&lt;T&gt; src)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h4 id="擦除和转换"><a href="#擦除和转换" class="headerlink" title="擦除和转换"></a>擦除和转换</h4><p>在严格的泛型代码里面，带泛型声明的类总应该带着类型参数。但是为了与老的JAVA代码保持一致，也允许在使用带泛型声明的类时不指定实际的类型参数。如果没有为这个泛型类指定实际的类型参数，则该类型参数被称作是原始类型，默认是声明该参数的第一个上限类型。</p>
<p>当把一个具有泛型信息的对象赋值给另一个没有泛型信息的变量的时候，所有在尖括号之间的类型信息都将会被扔掉。<br>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Apple</span> &lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Number</span>&gt;</span>&#123;</span><br><span class="line">T size;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Apple</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Apple</span><span class="params">(T size)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.size = size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSize</span><span class="params">(T size)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.size = size;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> T <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">this</span>.size;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Apple&lt;Integer&gt; a = <span class="keyword">new</span> Apple&lt;&gt;(<span class="number">6</span>);</span><br><span class="line"><span class="comment">//a 的getsize方法返回Integer</span></span><br><span class="line">Integer as = a.getSize();</span><br><span class="line"><span class="comment">//把a 的对象赋值给Apple变量，丢失尖括号里面的里类型信息</span></span><br><span class="line">Apple b = a;</span><br><span class="line"><span class="comment">//b 只能知道size的类型是Number</span></span><br><span class="line">Number size1 = b.getSize();</span><br><span class="line"><span class="comment">//Integer size2 = b.getSize();</span></span><br></pre></td></tr></table></figure>
<p>可以看到上面的一个示例，我们首先创建了一个Apple的类，是带有泛型声明为Integer的，其类型的上限是Number,这个类型形参用来定义Apple类的size变量，然后又创建了一个Apple的类，该类是没有泛型的，当我们把带有泛型信息的a对象的泛型信息赋值给不带有泛型信息的b对象的时候，即所有尖括号里面的信息都会丢失—–因为Apple 的类型形参的上限是Number类，编译器依然知道b的getsize()方法返回的是Number类型，但是具体是哪一个就不清楚了。</p>
<p><em>当我们将一个有着泛型类型的类a,赋值给没有泛型类型的类b的时候，就会出现丢失类的变量类型信息的现象，称为擦除。</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Apple&lt;Integer&gt; a = <span class="keyword">new</span> Apple&lt;&gt;(<span class="number">6</span>);</span><br><span class="line"><span class="comment">//a 的getsize方法返回Integer</span></span><br><span class="line">Integer as = a.getSize();</span><br><span class="line"><span class="comment">//把a 的对象赋值给Apple变量，丢失尖括号里面的里类型信息</span></span><br><span class="line">Apple b = a;</span><br><span class="line"><span class="comment">//b 只能知道size的类型是Number</span></span><br><span class="line">Number size1 = b.getSize();</span><br><span class="line">Apple&lt;Double&gt; c = b;</span><br><span class="line">Double size2 = (Double)c.getSize();</span><br></pre></td></tr></table></figure>
<p>我们在将没有泛型类型的类b,赋值给一个带有泛型类型的类c,这时候是可以编译通过的，只是会出现“未经检查的转换”警告。实际上引用的还是Apple<integer>的这个类型，当我们尝试通过强制转换把它转换成一个Double的类型的时候，就会出现运行时异常<strong><em>java.lang.ClassCastException</em></strong></integer></p>
<h4 id="泛型与数组"><a href="#泛型与数组" class="headerlink" title="泛型与数组"></a>泛型与数组</h4><p>java5的泛型有一个很重要的设计原则，如果一段代码在编译的时候没有提出“[unchecked]”未经检验的异常的时候，那么程序在运行的时候是不会引发ClassCastException的异常的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这种操作是错误的原因是 数组不能包含类型变量或者类型形参 </span></span><br><span class="line"> List&lt;String&gt; [] test = <span class="keyword">new</span> List&lt;String&gt;[<span class="number">10</span>];</span><br></pre></td></tr></table></figure></p>
<p>如果我们把上面的形式改为下面的格式，则为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个在java 5 中在编译的时候会出现 [unchecked] 异常</span></span><br><span class="line"> List&lt;String&gt; [] test = <span class="keyword">new</span> List[<span class="number">10</span>];</span><br></pre></td></tr></table></figure>
<p>在java 7 中是允许出现这个情况的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; [] test = <span class="keyword">new</span> ArrayList[<span class="number">10</span>];</span><br><span class="line">List&lt;String&gt; li = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">li.add(<span class="string">"2"</span>);</span><br><span class="line">test[<span class="number">0</span>] = li;</span><br><span class="line">System.out.println(test[<span class="number">0</span>].get(<span class="number">0</span>));</span><br></pre></td></tr></table></figure></p>
<p>Java 8 允许使用无上限的泛型通配符，但是在Java 5中，如果使用无上限的泛型通配符是需要进行 强制类型转换的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//java允许使用无上限的泛型统配符</span></span><br><span class="line">List&lt;?&gt; [] test = <span class="keyword">new</span> ArrayList&lt;?&gt;[<span class="number">10</span>];</span><br><span class="line">List&lt;String&gt; li = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">li.add(<span class="string">"2"</span>);</span><br><span class="line">List&lt;Integer&gt; li2 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">li2.add(<span class="number">3</span>);</span><br><span class="line">test[<span class="number">0</span>] = li;</span><br><span class="line">test[<span class="number">1</span>] = li2;</span><br><span class="line">System.out.println(test[<span class="number">0</span>].get(<span class="number">0</span>));</span><br><span class="line">System.out.println(test[<span class="number">1</span>].get(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2021/01/21/泛型总结与补充/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="泛型总结与补充">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-内网穿透" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2021/01/20/内网穿透/" class="article-date">
  	<time datetime="2021-01-20T13:30:11.630Z" itemprop="datePublished">2021-01-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/20/内网穿透/">
        内网穿透
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>教程<a href="https://github.com/fatedier/frp" target="_blank" rel="noopener">内网穿透</a><br>在windows上面设置的时候，需要添加一个远程连接用户</p>
<h3 id="配置一个含有公网ip的linux为代理服务器，配置windows为客户端"><a href="#配置一个含有公网ip的linux为代理服务器，配置windows为客户端" class="headerlink" title="配置一个含有公网ip的linux为代理服务器，配置windows为客户端"></a>配置一个含有公网ip的linux为代理服务器，配置windows为客户端</h3><p><a href="https://www.cnblogs.com/dsliang/p/10720728.html" target="_blank" rel="noopener">教程</a></p>
<h3 id="配置一个含有公网ip的linux为代理服务器，配置mac-os-为客户端"><a href="#配置一个含有公网ip的linux为代理服务器，配置mac-os-为客户端" class="headerlink" title="配置一个含有公网ip的linux为代理服务器，配置mac os 为客户端"></a>配置一个含有公网ip的linux为代理服务器，配置mac os 为客户端</h3><p><a href="https://zengwu.com.cn/p/a02d24c0.html" target="_blank" rel="noopener">教程</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2021/01/20/内网穿透/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="内网穿透">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-类的加载机制与反射机制" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2021/01/02/类的加载机制与反射机制/" class="article-date">
  	<time datetime="2021-01-02T11:20:46.830Z" itemprop="datePublished">2021-01-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/02/类的加载机制与反射机制/">
        类的加载机制与反射机制
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JVM和类"><a href="#JVM和类" class="headerlink" title="JVM和类"></a>JVM和类</h1><p>Java命令运行某一个Java程序的时候，该命令将会启动一个Java虚拟机进程，不管该Java程序多么复杂，都处于JVM虚拟机里面，所有的线程、所有的变量都处于同一个进程里面。</p>
<p>JVM终止的条件：</p>
<ul>
<li>程序正常运行结束</li>
<li>遇到未捕获的异常或错误而结束</li>
<li>平台强制结束了JVM</li>
<li>运行的时候使用了System.exit()和Runtime.getRuntime().exit()代码 处结束程序</li>
</ul>
<h2 id="类的加载或初始化"><a href="#类的加载或初始化" class="headerlink" title="类的加载或初始化"></a>类的加载或初始化</h2><p>如果该类还没有被加载到内存中，则系统会通过加载、连接、初始化三个步骤来对该程序进行初始化。</p>
<h3 id="类加载"><a href="#类加载" class="headerlink" title="类加载"></a>类加载</h3><p>类的加载是指<em>类加载器</em>将类的class文件读入内存，并为之创建一个java.lang.Class对象，也就是说，当程序使用任何类的时候，系统都会为之创建一个java.lang.Class对象。</p>
<p>class是作为类的二进制数据，通常有以下几种来源：</p>
<ul>
<li>本地系统加载class文件</li>
<li>从jar包 加载class 文件</li>
<li>通过网络加载class文件</li>
<li>把一个java源文件动态编译，并执行加载<br>类加载器通常无须等到使用的时候才加载，虚拟机规范允许系统预先加载某些类</li>
</ul>
<h3 id="类的连接"><a href="#类的连接" class="headerlink" title="类的连接"></a>类的连接</h3><p>当类被加载之后，系统会为之生成一个对应的Class对象，接着将会进入连接阶段，连接阶段负责把类的二进制数据合并到JRE中。<br>类的连接分为 下面三个阶段：</p>
<ul>
<li>验证：验证阶段用于检验被加载的类是否有正确的内部结构，并和其他类协调一致</li>
<li>准备： 类准备阶段则负责为类的静态Field分配内存，并设置默认初始值</li>
<li>解析：将类的二进制数据中的符号引用替换成直接引用。</li>
</ul>
<h3 id="类的初始化"><a href="#类的初始化" class="headerlink" title="类的初始化"></a>类的初始化</h3><p>类的初始化阶段，虚拟机负责对类进行初始化，主要就是对静态Field进行初始化。在Java类中对静态Field指定初始值有两种方式：</p>
<ul>
<li>声明静态Field时指定初始值</li>
<li>使用静态初始化块为静态Field指定初始值<br>静态初始化块都将被当成类的初始化语句<br>类的初始化的步骤：</li>
</ul>
<ol>
<li>先判断一下某一个类是不是加载和连接，先进行加载和连接操作</li>
<li>判断该类的直接父类有没有被初始化，先初始化其父类。每次先初始化的都是Object类</li>
<li>假如类中有初始化语句，则系统依次执行这些初始化语句<h3 id="类初始化的时机"><a href="#类初始化的时机" class="headerlink" title="类初始化的时机"></a>类初始化的时机</h3></li>
</ol>
<ul>
<li>创建类的实例（new,反射,反序列化）</li>
<li>调用某个类的静态方法</li>
<li>使用某个类或者接口的静态Field ，或者为该Field进行赋值</li>
<li>使用反射方式来强制创建某个类的或者接口的对应java.lang.Class 对象。</li>
<li>初始化某个类的子类</li>
<li>直接使用java.exe 命令来运行某个主类<h2 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h2>类加载器负责将class文件加载到内存中，并且为之生成对应的java.lang.Class对象。开发中很少用到类加载机制，但是了解这个机制，能更好的满足我们的需求。<br>一个类只要加载进JVM过一次，就不会在加载。同一个类的定义为（包名-类名）作为标识是一样的。一个对象的唯一标识使用的，同一个类+ 类加载器的编号。只有这三个全部相同了才能属于同一个类。<br>当JVM启动的时候，会形成3个类加载器组成的初始类加载器层次结构。</li>
<li>Bootstrap ClassLoader:根类加载器<br> 负责加载java的核心类。</li>
<li>Extension ClassLoader: 扩展类加载器<br> 扩展类加载器负责加载JRE的扩展项目中JAR包的类，通过这种方式，就可以为JAVA扩展核心类以外的新功能，只要我们将自己开发的类打包成JAR包，然后放入JAVA_HOME/jre/lib/ext 路径即可。</li>
<li>System ClassLoader:系统类加载器<br> 他负责在JVM启动的时候加载来自java命令的-classpath选项、java.class.path系统属性，或者CLASSPATH环境变量所指定的JAR包和类的路径。<h3 id="类加载机制"><a href="#类加载机制" class="headerlink" title="类加载机制"></a>类加载机制</h3>JVM的类加载机制主要有如下3种：</li>
<li>全盘负责<br> 就是当一个类加载器负责加载某个Class的时候，该Class所依赖的和引用的其他Class 也将由该类负责载入。</li>
<li>父类委托<br>先让parent(父)类加载器试图加载该Class,只有在父类加载器无法加载该类的时候才尝试从自己的类路径中加载该类。</li>
<li>缓存机制<br>缓存机制将会保证所有加载过的Class 都会被缓存，当程序中需要使用某个Class的时候，类加载器先从缓存中搜寻该Class，只有当缓存区不存在该class对象的时候，系统才会读取该类对应的二进制数据，并将其转换成Class对象，存入缓存区。<h4 id="自定义类加载器"><a href="#自定义类加载器" class="headerlink" title="自定义类加载器"></a>自定义类加载器</h4>开发者通过扩展ClassLoader的子类，并重写该ClassLoader所包含的方法来实现自定义的类加载器。可以实现如下功能：</li>
<li>执行代码之前自动验证数字签名</li>
<li>根据用户提供的密码解密代码，从而实现代码混淆来避免反编译Class文件</li>
<li>根据用户需求来动态的加载类</li>
<li>根据应用需求把其他数据以字节码的形式加载到应用中<h4 id="URLClassLoader类"><a href="#URLClassLoader类" class="headerlink" title="URLClassLoader类"></a>URLClassLoader类</h4>通过该类既可以从本地文件系统获取二进制文件来加载该类，也可以从远程主机获取二进制文件来加载该类。<br>主要提供了两构造器：</li>
<li>URLClassLoader(URL[] urls):使用默认的父类加载器创建一个ClassLoader对象，该对象将从urls所指定的系列路径来查询并加载类</li>
<li>URLClassLoader(URL[] urls ,ClassLoader parent) 使用指定的父类加载器创建一个ClassLoader对象<ul>
<li>URL file前缀表示从本地文件系统加载</li>
<li>http 前缀表示从互联网通过HTTP 加载访问来加载</li>
<li>ftp 为前缀 表明从互联网通过ftp 访问加载<h3 id="通过反射查看类的信息"><a href="#通过反射查看类的信息" class="headerlink" title="通过反射查看类的信息"></a>通过反射查看类的信息</h3>程序在运行时会出现两种类型，运行时类型与编译时类型。程序在运行的时候接收到外部传入的一个对象，该对象的编译时类型时Object,但是程序又需要调用该对象运行时类型的方法，为了在运行的时候发现对象和类的真实信息，可以通过下面两种方法：</li>
</ul>
</li>
<li>假设在编译时和运行时完全知道类型的具体信息，这种情况下可以通过使用instanceof运算符进行判断，在进行强制类型转换。</li>
<li>在编译的时候根本无法知道该对象和类属于哪些类，程序只能通过运行时信息来发现该对象和类的真实信息，就必须使用反射。<h4 id="获取Class-对象"><a href="#获取Class-对象" class="headerlink" title="获取Class 对象"></a>获取Class 对象</h4></li>
<li>使用Class 类的forName(String clazzName) 静态方法。该方法需要传入字符串参数，该字符串参数的值是某个类的全限定类名</li>
<li>调用某个类的class属性来获取该类对应的Class 对象例如：Person.class</li>
<li>调用某个对象的getClass()方法。该方法是java.lang.Object 类的一个方法</li>
<li>调用某个对象的getClass()方法，该方法是java.lang.Object类中的一个方法，所以所有的java对象都可以调用该方法。<br>前两种都是根据类来获取指定类的Class对象，第二种方法有如下优点：</li>
<li>安全性。程序在编译阶段就可以检查Class对象是不是存在</li>
<li>程序的性能更好。因为无需调用方法，因此性能更好<h4 id="从class中获取信息"><a href="#从class中获取信息" class="headerlink" title="从class中获取信息"></a>从class中获取信息</h4>Class类提供了大量的实例方法来获取该Class对象所对应的详细信息，主要使用方式查询API。<br>获取构造器的时候无须传入构造器名-同一个类的所有构造器的名字都是相同，所以要确定一个构造器只要指定形参列表即可。<h3 id="使用反射生成并操作对象"><a href="#使用反射生成并操作对象" class="headerlink" title="使用反射生成并操作对象"></a>使用反射生成并操作对象</h3><h4 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h4>通过反射生成对象有两种方式：</li>
<li>使用Class对象的newInstance()方法来创建该Class对象对应类的实例，这种方式要求该Class必须要实现默认的构造器</li>
</ul>
<p>根据配置文件创建 对象池<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Tool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">	<span class="comment">//定义一个对象池，前面是对象名，后面是实际的对象</span></span><br><span class="line">	<span class="keyword">private</span>	Map&lt;String, Object&gt; objectPool = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">	<span class="comment">//定一个创建对象的方法</span></span><br><span class="line">	<span class="comment">//该对象只要传入一个字符串类名，程序可以根据该类名生成Java对象</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> Object <span class="title">createObject</span> <span class="params">(String clazzName)</span> </span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException </span>&#123;</span><br><span class="line">		Class&lt;?&gt; clazz = Class.forName(clazzName);</span><br><span class="line">		<span class="comment">//使用clazz 默认的构造器创建实例</span></span><br><span class="line">		<span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//该方法根据指定文件来初始化对象池</span></span><br><span class="line">	<span class="comment">//根据配置文件来创建对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initPool</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			FileInputStream fis  = <span class="keyword">new</span> FileInputStream(fileName);</span><br><span class="line">			Properties pr = <span class="keyword">new</span> Properties();</span><br><span class="line">			pr.load(fis);</span><br><span class="line">			<span class="keyword">for</span>(String name : pr.stringPropertyNames()) &#123;</span><br><span class="line">				System.out.println(name);</span><br><span class="line">				<span class="comment">//每取出一对 key-value对就根据value创建一个对象，根据对象值 填充到对象池中</span></span><br><span class="line">				objectPool.put(name,createObject(pr.getProperty(name)));</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			System.out.println(<span class="string">"读取"</span>+fileName+<span class="string">"异常"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getObject</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> objectPool.get(name);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	test pf = <span class="keyword">new</span> test();</span><br><span class="line">	pf.initPool(<span class="string">"./src/instance.properties"</span>);</span><br><span class="line">	Object x1 = pf.getObject(<span class="string">"a"</span>);</span><br><span class="line">	Object x2 = pf.getObject(<span class="string">"b"</span>);</span><br><span class="line">	System.out.println(x1.equals(x2));</span><br><span class="line">	<span class="comment">//System.out.println(pf.getObject("b"));</span></span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>先使用Class对象获取指定的Constructor对象，在调用Constructor对象的newInstance()方法来创建该对象对应的实例。<br>如果不想利用默认构造器来创建java对象，而是使用指定的构造器来创建java对象，则需要利用Constructor对象，每一个Constructor对应一个构造器。<br>这个的使用步骤为：<ul>
<li>首先获得一个类的Class</li>
<li>通过Class获取该类对应的constructor</li>
<li>调用Constructor的newInstance()方法来创建Java对象。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取class对象</span></span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		Class&lt;?&gt; cla = Class.forName(<span class="string">"javax.swing.JFrame"</span>);</span><br><span class="line">		Constructor con = cla.getConstructor(String.class);</span><br><span class="line">		<span class="comment">//调用方法创建对象</span></span><br><span class="line">		Object obj = con.newInstance(<span class="string">"ceshi"</span>);</span><br><span class="line">		System.out.println(obj);</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>第一种方式来创建对象是比较常见的方式，因为在java中很多都是通过读取配置文件信息来创建java对象的。</p>
<h4 id="调用方法"><a href="#调用方法" class="headerlink" title="调用方法"></a>调用方法</h4><p>当获得某个类对应的Class对象后，就可以通过该Class对象的getMethods()方法或者getMethod()方法来获取全部方法或者指定方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Tool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">	<span class="comment">//定义一个对象池，前面是对象名，后面是实际的对象</span></span><br><span class="line">	<span class="keyword">private</span>	Map&lt;String, Object&gt; objectPool = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">	<span class="keyword">private</span> Properties pr = <span class="keyword">new</span> Properties();</span><br><span class="line">	<span class="comment">//定一个创建对象的方法</span></span><br><span class="line">	<span class="comment">//该对象只要传入一个字符串类名，程序可以根据该类名生成Java对象</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> Object <span class="title">createObject</span> <span class="params">(String clazzName)</span> </span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException </span>&#123;</span><br><span class="line">		Class&lt;?&gt; clazz = Class.forName(clazzName);</span><br><span class="line">		<span class="comment">//使用clazz 默认的构造器创建实例</span></span><br><span class="line">		<span class="keyword">return</span> clazz.newInstance();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//该方法根据指定文件来初始化对象池</span></span><br><span class="line">	<span class="comment">//根据配置文件来创建对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initPool</span><span class="params">(String fileName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			FileInputStream fis  = <span class="keyword">new</span> FileInputStream(fileName);</span><br><span class="line">			</span><br><span class="line">			pr.load(fis);</span><br><span class="line">			<span class="keyword">for</span>(String name : pr.stringPropertyNames()) &#123;</span><br><span class="line">				System.out.println(name);</span><br><span class="line">				<span class="comment">//每取出一对 key-value对就根据value创建一个对象，根据对象值 填充到对象池中</span></span><br><span class="line">				<span class="keyword">if</span>(!name.contains(<span class="string">"%"</span>)) &#123;</span><br><span class="line">					objectPool.put(name,createObject(pr.getProperty(name)));</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			System.out.println(<span class="string">"读取"</span>+fileName+<span class="string">"异常"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initProperty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(String name : pr.stringPropertyNames()) &#123;</span><br><span class="line">			<span class="comment">// 每次取出来一个key-value 对，如果key 中包含百分号（%）</span></span><br><span class="line">			<span class="comment">//即可认为该key 是用来为对象的Field赋值的</span></span><br><span class="line">			<span class="comment">/*</span></span><br><span class="line"><span class="comment">			 * %的前半为对象名字，后半为Field设置值</span></span><br><span class="line"><span class="comment">			 * 程序将会调用相对应的setter来为Field设置值</span></span><br><span class="line"><span class="comment">			 */</span></span><br><span class="line">			<span class="keyword">if</span>(name.contains(<span class="string">"%"</span>)) &#123;</span><br><span class="line">				<span class="comment">//将配置文件按照%进行分割</span></span><br><span class="line">				String [] objAndProp = name.split(<span class="string">"%"</span>);</span><br><span class="line">				<span class="comment">//取出需要设置的Field值的目标对象</span></span><br><span class="line">				Object target = getObject(objAndProp[<span class="number">0</span>]);</span><br><span class="line">				<span class="comment">//该Field对应的setter方法名为</span></span><br><span class="line">				String mtdName = <span class="string">"set"</span>+objAndProp[<span class="number">1</span>].substring(<span class="number">0</span>,<span class="number">1</span>).toUpperCase()+objAndProp[<span class="number">1</span>].substring(<span class="number">1</span>);</span><br><span class="line">				Class&lt;?&gt; targetClass = target.getClass();</span><br><span class="line">				<span class="comment">//获取该属性对应的setter方法</span></span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					Method mtd = targetClass.getMethod(mtdName, String.class);</span><br><span class="line">					<span class="comment">//通过Method 的invoke 方法执行setter 方法</span></span><br><span class="line">					<span class="comment">//将config.getProperty(name) 的属性值作为调用setter的方法实参</span></span><br><span class="line">					mtd.invoke(target,pr.getProperty(name));</span><br><span class="line">				&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">					<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125; </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">getObject</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> objectPool.get(name);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	test test = <span class="keyword">new</span> test();</span><br><span class="line">	test.initPool(<span class="string">"./src/instance.properties"</span>);</span><br><span class="line">	test.initProperty();</span><br><span class="line">	System.out.println(test.getObject(<span class="string">"a"</span>));</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用Method的invoke()方法来调用对应的方法的时候，Java程序会要求必须有调用该方法的权限，如果某个程序想要调用某个对象的private方法， 那么可以先调用Method方法的如下方法：</p>
<ul>
<li>setAccessible(bool flag) 值为true的时候，说明该Method方法在使用的时候要取消java语言的访问呢检查，值为falser的时候，则要进行权限的检查。该方法不只是属于method ，对于constructor、field都是可以调用的<h4 id="访问属性值"><a href="#访问属性值" class="headerlink" title="访问属性值"></a>访问属性值</h4></li>
<li>getField(String name)</li>
<li>getFields()</li>
<li>getDeclaredField(String name)</li>
<li>getDeclaredFields()</li>
<li>setXxx(Object obj,Xxx val) 将obj对象的field设置成val值，Xxx对应八种基本类型，val是要设置的对象的值。如果属性类型是引用类型，则取消set后面的Xxx</li>
<li>getXxx()<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person1</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	   <span class="keyword">return</span> <span class="string">"Person[name:"</span>+name+<span class="string">",age:"</span>+age+<span class="string">"]"</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException </span>&#123;</span><br><span class="line">		Person1 p = <span class="keyword">new</span> Person1();</span><br><span class="line">		Class&lt;Person1&gt; clazz = Person1.class;</span><br><span class="line">		Field nameField = clazz.getDeclaredField(<span class="string">"name"</span>);</span><br><span class="line">		nameField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">		nameField.set(p, <span class="string">"gorge"</span>);</span><br><span class="line">		Field ageField = clazz.getDeclaredField(<span class="string">"age"</span>);</span><br><span class="line">		ageField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">		ageField.setInt(p, <span class="number">12</span>);</span><br><span class="line">		System.out.println(p);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="操作数组"><a href="#操作数组" class="headerlink" title="操作数组"></a>操作数组</h4><p>在java.lang.reflect包下还提供了一个Arrays类，Arrays对象可以代表所有数组，程序可以通过使用Arrays来动态的创建数组。</p>
<ul>
<li>static Object newInstance(class&lt;?&gt; type, int len) 创建一个类型为type，长度为len的数组</li>
<li>static xxx getXxx(Obj array, int index) 返回array数组中第index个元素。其中x x x是各种基本数据类型</li>
<li>static void setXxx(Obj array, int index,xxx val)将arrays数组中第index个元素的值设置为val,如果是引用类型则直接使用set()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Object arr = Array.newInstance(String.class,<span class="number">4</span>);</span><br><span class="line">		<span class="comment">//为数组赋值</span></span><br><span class="line">		Array.set(arr,<span class="number">3</span>,<span class="string">"java"</span>);</span><br><span class="line">		Array.set(arr, <span class="number">2</span>,<span class="string">"java ee"</span>);</span><br><span class="line">		Object one = Array.get(arr,<span class="number">2</span>);</span><br><span class="line">		Object two = Array.get(arr,<span class="number">3</span>);</span><br><span class="line">		System.out.println(one+<span class="string">":"</span>+two);</span><br></pre></td></tr></table></figure>
<h3 id="使用反射生成JDK动态代理"><a href="#使用反射生成JDK动态代理" class="headerlink" title="使用反射生成JDK动态代理"></a>使用反射生成JDK动态代理</h3><p>在java的java.lang.reflect 包下提供了一个Proxy类和一个InvocationHandler接口，通过使用这个类和接口可以生成JDK动态代理类或动态代理对象。<br>如果在程序中为<strong>一个或多个接口动态的生成实现类</strong>，就可以使用proxy来创建动态代理类；如果需要<strong>为一个或多个接口动态的创建实例</strong>，也可以使用Proxy来创建动态代理实例。</p>
<ul>
<li>static Class&lt;?&gt; getProxyClass(ClassLoader loader,Class &lt;?&gt; … interfaces): 创建一个动态代理类所对应的class对象，该代理类将实现interface 所指定的多个接口。第一个ClassLoade参数指定生成动态代理类的类加载器。</li>
<li>static Object newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h):直接创建一个动态代理对象，该代理对象的实现类实现了interface指定的系列接口，执行代理对象的每个方法时都会被替换执行InvocationHandler对象的invoke方法。<h4 id="通过动态代理类生成动态代理对象"><a href="#通过动态代理类生成动态代理对象" class="headerlink" title="通过动态代理类生成动态代理对象"></a>通过动态代理类生成动态代理对象</h4>先生成一个动态代理类，然后在通过动态代理类，来创建动态代理对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个InvokationHandler对象</span></span><br><span class="line">  InvocationHandler handler = <span class="keyword">new</span> MyInvokationHandler();</span><br><span class="line">  <span class="comment">//通过代理类来创建代理对象</span></span><br><span class="line">  Class proxyClass = Proxy.getProxyClass(Person.class.getClassLoader(), <span class="keyword">new</span> Class[] &#123;Person.class&#125;);</span><br><span class="line">  Constructor ctor = proxyClass.getConstructor(<span class="keyword">new</span> Class[] &#123;InvocationHandler.class&#125;);</span><br><span class="line">  Person p2 = (Person)ctor.newInstance(<span class="keyword">new</span> Object[] &#123;handler&#125;);</span><br><span class="line">  p2.sayHello(<span class="string">"nnd"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="直接生成动态代理对象"><a href="#直接生成动态代理对象" class="headerlink" title="直接生成动态代理对象"></a>直接生成动态代理对象</h4><ul>
<li>首先，我们要先创建一个接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">sayHello</span><span class="params">(String name)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>然后实现InvocationHandle接口，因为在执行方法的时候，都会被替换成调用该invoke()方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="comment">//生成动态代理对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInvokationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * 执行动态代理对象的所有方法的时候，都会被替换成执行如下的invoke方法</span></span><br><span class="line"><span class="comment">  * 其中：</span></span><br><span class="line"><span class="comment">  * proxy:代表动态代理对象 例如：Person.class.getClassLoader()</span></span><br><span class="line"><span class="comment">  * method:代表正在执行的方法</span></span><br><span class="line"><span class="comment">  * args:代表调用目标方法的时候传入的实参</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">  <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">  System.out.println(<span class="string">"---正在执行的方法："</span>+method);</span><br><span class="line">  <span class="comment">//这里可以判断一下执行的是什么方法，然后对该方法进行 重新编辑</span></span><br><span class="line">  <span class="keyword">if</span>(method.equals(Person.class.getMethod(<span class="string">"walk"</span>, <span class="keyword">null</span>))) &#123;</span><br><span class="line">   System.out.println(<span class="string">"正在执行walk方法"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(args!=<span class="keyword">null</span>) &#123;</span><br><span class="line">   System.out.println(<span class="string">"下面是执行该方法的时候传入的参数："</span>);</span><br><span class="line">   <span class="keyword">for</span>(Object obj:args) &#123;</span><br><span class="line">    System.out.println(obj);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">   System.out.println(<span class="string">"该方法没有实际的参数"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>创建一个动态代理对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建一个InvokationHandler对象</span></span><br><span class="line">  InvocationHandler handler = <span class="keyword">new</span> MyInvokationHandler();</span><br><span class="line">  <span class="comment">//使用指定的InvocationHandler 来生成一个动态代理对象</span></span><br><span class="line">  Person p = (Person)Proxy.newProxyInstance(Person.class.getClassLoader(),<span class="keyword">new</span> Class[] &#123;Person.class&#125; , handler);</span><br><span class="line">  p.walk();</span><br><span class="line">  p.sayHello(<span class="string">"HELLO"</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>一般我们通过第二种方式创建类的对象就可以了，在编写框架或者底层基础代码的时候，动态代理的作用就非常大了。</p>
<h4 id="动态代理和AOP"><a href="#动态代理和AOP" class="headerlink" title="动态代理和AOP"></a>动态代理和AOP</h4><p>在开发一个实际的应用软件系统的时候，总会存在相同的代码段重复出现的情况，这种情况下，如果通过复制粘贴的方式，则对于后期的维护是非常困难的，如果通过将这个方法写出一个方法，然后调用的方式执行，则会使得程序的耦合性提高。因此，我们就可以通过动态代理的方式进行。<br>具体方式如下：</p>
<ul>
<li>创建一个对象接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span>;</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>创建接口的实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GunDog</span> <span class="keyword">implements</span> <span class="title">Dog</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"我是一只猎狗"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"我奔跑很快"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>将重复的方法写到一个工具类中</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DogUtil</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"------通用方法一"</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"------通用方法二"</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>实现InvocationHandler方法，并设置主调对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInvokationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line"><span class="comment">//需要被代理的对象</span></span><br><span class="line"><span class="keyword">private</span> Object target;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(Object target)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">this</span>.target = target;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"> DogUtil du = <span class="keyword">new</span> DogUtil();</span><br><span class="line">  <span class="comment">//执行DogUtil对象中的method方法</span></span><br><span class="line">  du.method();</span><br><span class="line">  Object result = method.invoke(target, args);</span><br><span class="line">  <span class="comment">//执行DogUtil 对象中的method2方法</span></span><br><span class="line">  du.method2();</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>创建代理工厂为指定的target 生成动态代理对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyProxyFactory</span> </span>&#123;</span><br><span class="line"><span class="comment">//为指定的target生成动态代理对象</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getProxy</span><span class="params">(Object target)</span>  </span>&#123;</span><br><span class="line">  MyInvokationHandler handler = <span class="keyword">new</span> MyInvokationHandler();</span><br><span class="line">  <span class="comment">//为handler设置target对象</span></span><br><span class="line">  handler.setTarget(target);</span><br><span class="line">  <span class="comment">//创建并返回一个动态代理</span></span><br><span class="line">  <span class="keyword">return</span> Proxy.newProxyInstance(target.getClass().getClassLoader(),target.getClass().getInterfaces(), handler);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">  Dog target = <span class="keyword">new</span> GunDog();</span><br><span class="line">  <span class="comment">//以指定target 来创建动态代理对象</span></span><br><span class="line">  Dog dog = (Dog)MyProxyFactory.getProxy(target);</span><br><span class="line">  dog.info();</span><br><span class="line">  dog.run();</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>当我们使用proxy生成一个动态代理的时候，往往并不会凭空产生一个动态代理，通常都是为指定的目标对象生成动态代理。<br>这种动态的代理在AOP（面向切面的编程）中被称为AOP代理，AOP代理可以代替目标对象，AOP代理包含了目标对象的全部方法，但是AOP代理中的方法与目标对象的方法存在差异，AOP代理的方法可以在执行目标方法之前或者之后插入一些有用的处理。</p>
<h3 id="反射和泛型"><a href="#反射和泛型" class="headerlink" title="反射和泛型"></a>反射和泛型</h3><p>如果Class对应的类暂时未知，则使用Class&lt;?&gt;。通过在反射中使用泛型，可以避免使用反射生成的对象需要强制类型转换。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getInstance</span><span class="params">(Class&lt;T&gt; cls)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> cls.newInstance();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (InstantiationException | IllegalAccessException e) &#123;</span><br><span class="line">   <span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">   e.printStackTrace();</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//获取实例无需进行类型转换</span></span><br><span class="line">  Date d = getInstance(Date.class);</span><br><span class="line">  JFrame f = getInstance(JFrame.class);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用反射来获取泛型信息"><a href="#使用反射来获取泛型信息" class="headerlink" title="使用反射来获取泛型信息"></a>使用反射来获取泛型信息</h4><p>对于基本的类型，可以通过泛型，直接查看</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> dfsdf ;</span><br><span class="line">Field t = Test.class.getField(<span class="string">"dfsdf"</span>);</span><br><span class="line">  Class&lt;?&gt; TYPE = t.getType();</span><br><span class="line">  System.out.println(TYPE);</span><br></pre></td></tr></table></figure>
<p>但是如果该Field是有泛型类型的类型，如Map&lt;String,Integer&gt;类型，则不能准确的得到这个类型。<br>要想获取泛型类型，则需要先使用</p>
<ul>
<li>getGenericType() 获得实例的泛型类型<br>然后在将Type 对象强制类型转换为ParameterizedType 对象，该对象代表被参数化的类型，也就是增加了泛型限制的类型。</li>
<li>getRawType(): 返回没有泛型信息的原始类型</li>
<li>getActualTypeArguments() 返回泛型参数类型</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Map&lt;String,Integer&gt; score;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span> <span class="keyword">throws</span> NoSuchFieldException, SecurityException </span>&#123;</span><br><span class="line">    Class&lt;?&gt; clazz = Test.class;</span><br><span class="line">    Field f = clazz.getDeclaredField(<span class="string">"score"</span>);</span><br><span class="line">    Class&lt;?&gt; a = f.getType();</span><br><span class="line">    <span class="comment">//下面将看到输出Map类型，但是map的泛型类型，则获取不到</span></span><br><span class="line">    System.out.println(a);</span><br><span class="line">    <span class="comment">//获得Field实例f的泛型类型</span></span><br><span class="line">    Type gType = f.getGenericType();</span><br><span class="line">    <span class="comment">//如果这个类型是ParameterizedType 对象</span></span><br><span class="line">    <span class="keyword">if</span>(gType <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">     <span class="comment">//强制类型转换</span></span><br><span class="line">     ParameterizedType ptype = (ParameterizedType)gType;</span><br><span class="line">     <span class="comment">//获取原始类型</span></span><br><span class="line">     Type rType = ptype.getRawType();</span><br><span class="line">     System.out.println(<span class="string">"原始类型为："</span>+rType);</span><br><span class="line">     <span class="comment">//获取泛型类型的泛型参数</span></span><br><span class="line">     Type[] tArgs = ptype.getActualTypeArguments();</span><br><span class="line">     System.out.println(<span class="string">"泛型类型是："</span>);</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tArgs.length;i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"第"</span>+i+<span class="string">"个泛型类型是"</span>+tArgs[i]);</span><br><span class="line">     &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">     System.out.println(<span class="string">"获取类型错误"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>注意上面说有的类型都是来自java.lang.reflect包下的。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2021/01/02/类的加载机制与反射机制/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="类的加载机制与反射机制">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Java集合总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/12/25/Java集合总结/" class="article-date">
  	<time datetime="2020-12-25T12:35:38.840Z" itemprop="datePublished">2020-12-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/Java集合总结/">
        Java集合总结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Java的集合类主要是由两个接口派生出来的：Collection 和Map</p>
<ul>
<li>Collection<ul>
<li>Set 无序集合 不可重复<ul>
<li>EnumSet</li>
<li>SortedSet<br>  TreeSet</li>
<li>HashSet<br>  LinkedHashSet</li>
</ul>
</li>
<li>Queue 队列<ul>
<li>Deque<br> ArrayDeque<br> LinkedList</li>
<li>PriorityQueue</li>
</ul>
</li>
<li>List 有序集合 元素可以重复<ul>
<li>ArrayList</li>
<li>LinkedList</li>
<li>Vector<br> stack</li>
</ul>
</li>
</ul>
</li>
<li>Map<ul>
<li>EnumMap</li>
<li>IdentityHashMap</li>
<li>HashMap(线程不安全，key value 可以为null)<ul>
<li>LinkedHashMap</li>
</ul>
</li>
<li>Hashtable (线程安全key value 不能为null )<ul>
<li>Properties</li>
</ul>
</li>
<li>SortedMap<ul>
<li>TreeMap</li>
</ul>
</li>
<li>WeekHashMap</li>
</ul>
</li>
<li>Iterator 用来集合遍历<h1 id="各个集合的特点"><a href="#各个集合的特点" class="headerlink" title="各个集合的特点"></a>各个集合的特点</h1><h2 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h2><h3 id="HashSet-类"><a href="#HashSet-类" class="headerlink" title="HashSet 类"></a>HashSet 类</h3>特点：</li>
</ul>
<ol>
<li>不能保证元素的排列顺序，顺序有可能发生变换</li>
<li>不是同步的，如果是多线程程序，需要使用线程代码，来保证同步</li>
<li>集合元素可以为null</li>
<li>HashSet 集合判断两个元素相等是通过两个对象执行equals()方法比较并且两个对象的hashCode()方法返回值也要相等。</li>
</ol>
<p>补充： hash 算法的功能 - hash算法的价值在于速度，它可以保证查询速度被快速执行。当需要查询集合中某个元素的时候，hash算法可以直接根据该元素计算出该元素的存储位置，从而可以让程序快速定位该元素。</p>
<p>HashSet中每个能存储元素的“槽位”通常称为“桶”，如果有多个元素的hashCo de值相同，但他们通过equals()方法返回false,这样一个“桶”里面就会放多个元素，会导致性能下降。</p>
<h3 id="LinkedHashSet"><a href="#LinkedHashSet" class="headerlink" title="LinkedHashSet"></a>LinkedHashSet</h3><p>是HashSet的子类，与父类的不同在于该类使用链表维护元素的次序，这样使得元素看起来是按照插入顺序保存的。<br>LinkedHashSet是因为使用了链表维护元素的次序，因此性能相对低于父类，但是迭代访问的时候将会有很好的性能。</p>
<h3 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h3><p>TreeSet可以确保集合元素处于排序状态（排序状态指的是根据值的实际大小），除了haseset的方法之外，treeset提供了一些额外的方法</p>
<ul>
<li>Comparator comparator() 如果truest 采用了定制的排序，则该方法返回定制排序所使用的Comparator ,如果采用的是自然的排序，那么这个方法返回null</li>
<li>first() 返回集合元素中的第一个元素</li>
<li>last() 返回集合元素中的最后一个元素</li>
<li>lower(object e) 返回集合元素中位于指定元素之前的元素（即小于指定元素的最大元素）</li>
<li>higher(object e) 返回集合中位于指定元素之后的元素 （即大于指定元素的最小元素）</li>
<li>subSet(from,to) 返回集合的子集合，范围从from 到to</li>
<li>headSet(toele) 返回集合的子集，由小于toele的元素组成</li>
<li>tailSet(fromele) 返回集合的子集，由大于或等于fromele的元素组成</li>
</ul>
<h4 id="treeset的排序"><a href="#treeset的排序" class="headerlink" title="treeset的排序"></a>treeset的排序</h4><p>TreeSet 按照红黑树的数据结构进行存储，支持两种排序。<br><strong><em>如果想要在集合treeSet中添加对象的话，该对象就需要实现Comparable接口。</em></strong><br>comparable该接口定义了一个compareTo(Object obj)方法，该方法返回一个整数值。obj1.compareTo(obj2)如果该方法返回0，则表明这两个对象是相等的，如果返回一个正整数，则表明obj1 大于obj2，如果该方法返回一个负整数，则表明obj1小于obj2。</p>
<ul>
<li>自然排序<br>默认情况下是按照自然排序的方法进行排序的，即比较集合的大小，然后按照升序排列。<br>注意：如果添加的对象的比较是根据一个可变Field的字段，进行比较的情况。<br>如果是修改了Field字段，再次试图删除该对象的时候，Treeset里面的元素处于无序的状态，删除一个没有改变过的数据后集合中的元素会进行重新索引，接下来就可以删除集合中的所有的元素了。</li>
<li>定制排序<br>如果实现定制排序，则可以通过Comparator 接口的帮助。该接口里包含一个in t compare(T o1,T o2)方法，该方法可以用于比较o1和o2的大小。如果需要实现定制排序，则需要在创建TreeSet集合对象的时候，提供一个Comparator对象与该TreeSet 集合关联。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">M</span> </span>&#123;</span><br><span class="line"> <span class="keyword">int</span> age ;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="title">M</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">	 <span class="keyword">this</span>.age = age;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	 <span class="keyword">return</span> <span class="string">"M[age:"</span>+age+<span class="string">"]"</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSetTest4</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		TreeSet&lt;M&gt; ts = <span class="keyword">new</span> TreeSet&lt;M&gt;(<span class="keyword">new</span> Comparator&lt;M&gt;() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(M o1, M o2)</span> </span>&#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">				M m1 = o1;</span><br><span class="line">				M m2 = o2;</span><br><span class="line">				<span class="keyword">return</span> m1.age&gt;m2.age?-<span class="number">1</span>:m1.age &lt;m2.age?<span class="number">1</span>:<span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		ts.add(<span class="keyword">new</span> M(<span class="number">5</span>));</span><br><span class="line">		ts.add(<span class="keyword">new</span> M(-<span class="number">3</span>));</span><br><span class="line">		ts.add(<span class="keyword">new</span> M(<span class="number">9</span>));</span><br><span class="line">		System.out.println(ts);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="EnumSet类"><a href="#EnumSet类" class="headerlink" title="EnumSet类"></a>EnumSet类</h3><p>EnumSet是一个专门为枚举类设计的集合类，EnumSet中的所有元素必须是指定枚举类型的枚举，集合元素是有顺序，顺序是由定义顺序决定的。</p>
<p>EnumSet内部是以位向量的形式存储的，这种存储形式非常高效，占用内存小，运行效率好，进行批量操作的执行速度非常快。</p>
<p>EnumSet 集合不允许加入null元素。<br>EnumSet 类没有暴露任何构造器来创建该类的实例，程序应该通过它提供的static方法来创建EnumSet对象。</p>
<h4 id="EnumSet类提供了如下常用的static方法来创建对象"><a href="#EnumSet类提供了如下常用的static方法来创建对象" class="headerlink" title="EnumSet类提供了如下常用的static方法来创建对象"></a>EnumSet类提供了如下常用的static方法来创建对象</h4><ul>
<li>allof(Class ele)：创建一个包含指定枚举类里所有枚举值的EnumSet集合</li>
<li>complementOf(EnumSet s) 创建一个其元素类型与指定EnumSet里元素类型相同的EnumSet集合</li>
<li>copyOf(Collection c) 使用一个普通集合来创建EnumSet集合</li>
<li>copyOf(EnumSet s) 创建一个与指定EnumSet 具有相同元素类型、相同集合元素的EnumSet集合</li>
<li>noneOf(Class elementType) 创建一个元素类型为指定枚举类型的空EnumSet</li>
<li>range(E from ,E rest) 创建包含一个或多个枚举值的EnumSet 集合，传入的多个枚举值必须属于同一个枚举类</li>
<li>of(E first,E rest) 创建一个包含一个或多个枚举值的EnumSet集合</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mport java.util.EnumSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> season&#123;</span><br><span class="line">	Sp,Sum,Fal,Win</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSetTest4</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		EnumSet es1 = EnumSet.allOf(season.class);</span><br><span class="line">		System.out.println(es1);</span><br><span class="line">		</span><br><span class="line">		EnumSet es2 = EnumSet.noneOf(season.class);</span><br><span class="line">		System.out.println(es2);</span><br><span class="line">		</span><br><span class="line">		es2.add(season.Sp);</span><br><span class="line">		System.out.println(es2);</span><br><span class="line">		</span><br><span class="line">		EnumSet es3 = EnumSet.complementOf(es1);</span><br><span class="line">		es3.add(season.Fal);</span><br><span class="line">		System.out.println(es3);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>** 当试图复制一个Collection集合里面的值的时候来创建EnumSet集合时，必须保证Collection集合里面的元素都是同一个枚举类的枚举值。</p>
<h4 id="set类的性能分析以及使用决策"><a href="#set类的性能分析以及使用决策" class="headerlink" title="set类的性能分析以及使用决策"></a>set类的性能分析以及使用决策</h4><ul>
<li>HashSet总是比TreeSet好，特别是常用的添加、查询元素。只有当需要维持一个排序的集合的时候才选择TreeSet.</li>
<li>HashSet与Lin kedHashSet的比较：hashSet的插入、删除操作要更快一些。LinkedHashSet的遍历操作会更快一些。</li>
<li>EnumSet 是所有Set实现类中性能最好的，但是只能保存同一个枚举类的枚举值作为集合元素。</li>
<li>三个实现类都是线程不安全的，如果有多个线程访问set的时候，则必须手动保证该Se t集合的同步。<br>通常可以使用synchronizedSortedSet方法来包装<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SortedSet s = Collections.synchronizedSortedSet(<span class="keyword">new</span> TreeSet());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h2><p>Lsit集合代表一个元素有序、可重复的集合，集合中每个元素都有其对应的顺序索引。list集合允许使用重复元素，可以通过索引来访问指定位置的集合元素。<br>List集合可以使用collection集合的所有操作方法。<br>list里面增加了一些根据索引来操作集合元素的方法。</p>
<ul>
<li>void add(int index ,obj ele) </li>
<li>boolean addAll(int index,Collection c )</li>
<li>object get(int index) 返回集合index索引处的元素</li>
<li>int indexOf(Object o) 返回对象o 在list集合中第一次出现的位置索引</li>
<li>int lastIndexOf(obj o) 返回对象o在list中最后一次出现的位置索引</li>
<li>obj remove(int index) 删除并返回index索引处的元素</li>
<li>List subList(int fromIndex,int toIndex) 返回从索引fromIndex 到索引toIndex处所有集合元素组成的子集合</li>
<li>Object set(int index,Object element) 将index索引处的元素替换成element对象<br> 当调用List集合的set的方法的时候，指定的索引必须是Lis t集合的有效索引，不能添加一个大于list长度的索引值。</li>
<li><ul>
<li>集合元素判断两个元素相等的方式是 equals 方法。<br><em>equals判断相等的方法是值相等，== 判断相等的方法是指向同一个对象。</em></li>
</ul>
</li>
</ul>
<h4 id="list还额外提供了一个listIterator-方法，该方法返回一个ListIterator对象-增加了下面的方法"><a href="#list还额外提供了一个listIterator-方法，该方法返回一个ListIterator对象-增加了下面的方法" class="headerlink" title="list还额外提供了一个listIterator()方法，该方法返回一个ListIterator对象,增加了下面的方法"></a>list还额外提供了一个listIterator()方法，该方法返回一个ListIterator对象,增加了下面的方法</h4><ul>
<li>boolean hasPrevious() 返回该迭代器关联的集合是否还有上一个元素</li>
<li>Object previous() 返回该迭代器的上一个元素</li>
<li>void add() 在指定的位置增加一个元素<h3 id="ArrayList和Vector实现类"><a href="#ArrayList和Vector实现类" class="headerlink" title="ArrayList和Vector实现类"></a>ArrayList和Vector实现类</h3>（vector 是一个古老的集合，有很多缺点，不建议使用，Ar ra yList是线程不安全的，Vector是线程安全的）</li>
<li>完全支持前面提到的List接口的全部功能</li>
<li>都是基于数组实现的List类</li>
<li>这两个对象都是使用initialCapacity 参数来设置数组的长度，当数组的长度改变的时候可以initialCapacity回自动增加</li>
<li>void ensureCapacity(int minCapacity) 当向实现类中增加大量的元素的时候，该方法可以一次性的增加mincapacity大小的</li>
<li>void trimToSize() 调整ArrayList或vector集合的Obj[] 数组长度为当前元素的个数。减少使用空间</li>
<li>vector 集合实现了一个Stack的子类。实现了栈的方法，peek(),pop(),push()方法。<h3 id="固定长度的List"><a href="#固定长度的List" class="headerlink" title="固定长度的List"></a>固定长度的List</h3>前面讲数组的时候介绍了一个操作数组的工具类：Arrays,该工具类里提供了asList(object …a) 方法，该方法可以把一个数组或指定个数的对象转换成List集，这个list既不是ArrayList实现类的实例，也不是Vector实现类的实例，而是Arrays的内部类ArrayList的实例。<br>Arrays.ArrayList是一个固定长度的List集合，程序只能遍历访问该集合里面的元素，不能增加、删除该集合里面的元素。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List fixedList = Arrays.asList(<span class="string">"疯狂Java讲义"</span>,<span class="string">"轻量级Java EE企业级应用实战"</span>);</span><br><span class="line">	System.out.println(fixedList.getClass());</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;fixedList.size();i++) &#123;</span><br><span class="line">		System.out.println(fixedList.get(i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//试图增加、删除元素都会引发异常</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Queue集合"><a href="#Queue集合" class="headerlink" title="Queue集合"></a>Queue集合</h3><p>用于模拟队列这种数据结构，队列通常是指“先进先出”的容器。</p>
<p>Queue接口中定义了以下几个方法：</p>
<ul>
<li>void add(Object e): 将指定元素加入到这个队列的尾部</li>
<li>Object element(): 获取队列头部的元素，但是不删除队列中该元素</li>
<li>boolean offer(Object e) 将指定元素加入到此队列的尾部</li>
<li>Object peek() 获取队列头部的元素 但是不删除该元素，队列为空就返回null</li>
<li>Object poll() 获取队列头部元素，并且删除这个元素</li>
</ul>
<p>Queue接口有一个PriorityQueue 实现类。Queue还有一个Deque接口，Deque代表一个“双端队列”,双端队列可以同时从两端来添加、删除元素。</p>
<h4 id="PriorityQueue实现类"><a href="#PriorityQueue实现类" class="headerlink" title="PriorityQueue实现类"></a>PriorityQueue实现类</h4><p>这个队列是一个比较标准的队列实现类，之所以说它是比较标准的队列实现，是因为这个队列的保存不是按照加入队列的顺序保存的，而是按照队列元素的大小进行重新排序，取出的时候是先取出元素最小的那个元素，而不是首先插入的元素。(在这个意义上已经违背了队列的先进先出)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PriorityQueue&lt;Integer&gt; pro = <span class="keyword">new</span> PriorityQueue&lt;Integer&gt;();</span><br><span class="line">	pro.offer(<span class="number">3</span>);</span><br><span class="line">	pro.offer(<span class="number">9</span>);</span><br><span class="line">	pro.offer(<span class="number">1</span>);</span><br><span class="line">	System.out.println(pro);</span><br><span class="line">	System.out.println(pro.poll());</span><br><span class="line">	System.out.println(pro.poll());</span><br><span class="line">	System.out.println(pro.poll());</span><br></pre></td></tr></table></figure>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">9</span>, <span class="number">3</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>可以发现，如果是直接输出队列的话，会使用toString()返回值，受String的影响，会导致输出的序列没有按照顺序输出，但是如果我们使用poll()的话，就是按照从小到大的顺序。</p>
<p>PriorityQueue 不允许插入null元素，因为它需要对队列中元素进行排序。</p>
<ul>
<li>自然排序<br>自然排序的元素必须实现了Comparable接口。</li>
<li>定制排序<br> 创建PriorityQueue队列的时候，传入一个Comparator 对象，该对象负责对队列中的所有元素进行排序，不要求队列元素实现Comparator的接口。<h4 id="Deque-接口与ArrayDeque实现类"><a href="#Deque-接口与ArrayDeque实现类" class="headerlink" title="Deque 接口与ArrayDeque实现类"></a>Deque 接口与ArrayDeque实现类</h4>Deque接口是Queue接口的子接口，代表了一个双端队列，允许从两端来操作队列的元素。<strong><em>可以当作双端队列或者栈使用</em></strong></li>
<li>addFirst()</li>
<li>addLast()</li>
<li>Iterator descendingIterator() 返回该双端队列对应的迭代器，该迭代器按照逆向顺序迭代队列</li>
<li>getFirst()</li>
<li>getLast()</li>
<li>offerFiirst()</li>
<li>offerLast()</li>
<li>peekFirst()</li>
<li>peekLast()</li>
<li>pollFirst()</li>
<li>pollLast()</li>
<li>pop() 相当于removeFirst</li>
<li>push() 相当于addFirst</li>
<li>obj removeFirst() 获取并删除该双端队列的第一个元素</li>
<li>obj removeFirstOccurrence(obj o) 删除该双端队列的第一个出现的元素o</li>
<li>removeLast()获取并删除该双端队列的最后一个元素</li>
<li>removeLastOccurrence(obj o) 删除该双端队列最后一次出现的元素o<br>ArrayDeque是Deque的基于数组的实现类。<h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h4>是List接口的实现类，意味着这是Lis t的一个集合，可以根据索引来随机访问集合中的元素，还实现了De que接口，因此也可以当作双端队列使用，也可以当作栈使用。</li>
</ul>
<p>LinkedList是一个功能非常强大的集合，与ArrayList以及ArrayDeque的实现机制完全不同，Array是按照数组形式来保存数据的，因此在访问集合元素的时候性能比较好，Linkedlist是根据链表来存储数据的，访问数据的时候性能比较差，但是在插入、删除元素的时候性能比较好。</p>
<h3 id="各种线性表的性能分析"><a href="#各种线性表的性能分析" class="headerlink" title="各种线性表的性能分析"></a>各种线性表的性能分析</h3><table>
<thead>
<tr>
<th>名称</th>
<th>实现机制</th>
<th>随机访问排名</th>
<th>迭代操作</th>
<th>插入操作</th>
<th>删除操作</th>
</tr>
</thead>
<tbody>
<tr>
<td>数组</td>
<td>连续内存区保存元素</td>
<td>1</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>ArrayList/ArrayDeque</td>
<td>以数组保存元素</td>
<td>2</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Vector</td>
<td>以数组保存元素</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>LinkedList</td>
<td>以链表保存元素</td>
<td>4</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<h4 id="java堆内存大小的修改"><a href="#java堆内存大小的修改" class="headerlink" title="java堆内存大小的修改"></a>java堆内存大小的修改</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xms128m -Xmx512m PerformanceTest</span><br></pre></td></tr></table></figure>
<p>-Xms 表示设置的JVM的堆内存的初始大小<br>-Xmx 表示设置的JVM的堆内存的最大大小（不要超过物理内存）</p>
<h4 id="使用建议"><a href="#使用建议" class="headerlink" title="使用建议"></a>使用建议</h4><ul>
<li>如果是遍历List集合 <ul>
<li>ArrayList、Vector使用get来遍历集合元素</li>
<li>LinkedList集合 使用迭代器遍历</li>
</ul>
</li>
<li>如果需要经常执行插入删除 操作 则使用LinkedList。如果使用ArrayList或者Vector的话，通常需要重分配内部数组的大小，时间开销经常是LinkedList的几十倍。</li>
<li>多线程访问集合的时候，应该考虑集合的线程安全集合</li>
</ul>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>map的key是不允许重复的，在一个Map对象的任何两个key通过equals方法比较总是返回false。<br>Set与Map的关系非常的密切，从源码来看，Java是通过先实现了Map，然后通过包装一个所有value都为null的Map就实现了Set集合。<br>通用方法总结<br>-clear() 删除该Map对象中所有的key-value对</p>
<ul>
<li>bool containsKey()</li>
<li>bool containsValue() </li>
<li>Set entrySe() 返回Map集合中所有的key-value对</li>
<li>obj get(key)</li>
<li>isEmpty()</li>
<li>Set keySet()</li>
<li>obj put(key,value)</li>
<li>void putAll(map)</li>
<li>obj remove(key)</li>
<li>int size() </li>
<li>Collection values()</li>
</ul>
<p>map中的每一个实体类的方法：</p>
<ul>
<li>obj getKey()</li>
<li>obj getValue()</li>
<li>obj setValue()<h3 id="HashMap-和-Hashtable实现类"><a href="#HashMap-和-Hashtable实现类" class="headerlink" title="HashMap 和 Hashtable实现类"></a>HashMap 和 Hashtable实现类</h3>HashTable与HashMap都是Map接口的典型实现，它们之间的关系类似于ArrayList与Vector的关系。HashTable是一个古老的Map实现类。<br>区别：</li>
<li>Hashtable是一个线程安全的实现，HashMap是线程不安全的。</li>
<li>Hashtable不允许使用null作为key和value ,HashMap是可以的。<br>Hashtable和HashMap类用作key的对象都必须实现hashCode()方法和equals()方法。<br>Hashtable与HashMap 列表判断值相等的方法是equals()方法<h4 id="LinkedHashMap"><a href="#LinkedHashMap" class="headerlink" title="LinkedHashMap"></a>LinkedHashMap</h4>LinkedhashMap 使用双向链表来维护key-value对的次序，该链表负责维护Map的迭代顺序，保证顺序与插入的链表一致。<h4 id="Properties-读写属性文件"><a href="#Properties-读写属性文件" class="headerlink" title="Properties 读写属性文件"></a>Properties 读写属性文件</h4>（windows中的ini文件就是一种属性文件）<br>Properties 类是Hashtable 类的子类，该对象在处理属性文件的时候特别方便。该类可以把Map 对象和属性文件关联起来，从而可以把Map对象中的key-value 对写入属性文件中，也可以把属性文件中的“属性名= 属性值”加载到Map 对象中。<br>一共有三个方法修改Properties里面的key和value值</li>
<li>String getProperty(String key) : 获取属性文件中指定属性名对应的属性值</li>
<li>String getProperty(String key,String defaultValue) 如果文件中不存在指定的key值的时候，会设置default作为默认值。</li>
<li>Object setProperty(String key,String value) 设置属性</li>
<li>void load(InputStream inStream) 从属性文件中加载key-value对，把加载到的key-value对追加到Propertie里面，不保证次序</li>
<li>void store(OutputStream out,String ) 将properties 中的key-value对输出到指定的属性文件中。</li>
</ul>
<p>这里提供一个读取java中的properties文件的示例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="comment">// 读取</span></span><br><span class="line">			pro.load(<span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"./pro.properties"</span>)));</span><br><span class="line">			String xx = pro.getProperty(<span class="string">"ee"</span>);</span><br><span class="line">			System.out.println(xx);</span><br><span class="line">			pro.setProperty(<span class="string">"p"</span>, <span class="string">"12323"</span>);</span><br><span class="line">			System.out.println(pro.getProperty(<span class="string">"p"</span>));</span><br><span class="line">			<span class="comment">//存储</span></span><br><span class="line">			pro.store(<span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"./pro.properties"</span>)),<span class="string">"test line"</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h4 id="SortedMap接口和TreeMap实现类"><a href="#SortedMap接口和TreeMap实现类" class="headerlink" title="SortedMap接口和TreeMap实现类"></a>SortedMap接口和TreeMap实现类</h4><p>SortedMap接口也有一个TreeMap的实现类，TreeMap就是一个红黑树数据结构，每个key-value对即作为红黑树的一个节点。TreeMap存储key-value对的时候，需要根据key对节点进行排序。TreeMap可以保证所有的key-value对处于有序状态。</p>
<ul>
<li>自然排序<br>key必须实现Comparable接口，而且所有的ke y应该是同一个类的对象。</li>
<li><p>自定义排序<br> 创建Treemap的时候，需要传入一个Comparator对象，该对象负责对Treemap 中的所有的key进行排序。</p>
<p>如果使用自定义作为Treemap的key的时候，如果想要让TreeMap良好的工作，则重写该类的equals()方法和compareTo()方法时保持一致的返回结果，两个key 通过equals()方法比较返回true时，它们通过compareTo()方法。</p>
</li>
<li><p>Map.Entry firstEntry()：返回该Map中的最小值，如果该Map为空或不存在这样的key，则都返回null</p>
</li>
<li>firstKey() 返回该Map中最小key值，如果该Map为空，则返回null</li>
<li>Map.Entry lastEntry(): 返回map中最大key值</li>
<li>Map.Entry higherEntry(obj key) 返回该Map中位于后一位的key-value 对。如果该Map为空，则返回null</li>
<li>Object higherKey(object key) 返回该Map中位于key后一位的key值</li>
<li>Map.Entry lowerEntry(obj key) 返回该Map中位于key 前一位的key-value对</li>
<li>Object lowerKey(obj key) 返回该Map中位于key前一位的ke y值</li>
<li>NavigableMap subMap(obj fromkey, bool from, obj toKey ,bool toin) 返回map的子集，是否包含fromKey 与 toKey主要取决于 后面的bool值</li>
<li>SortedMap tailMap(obj fromKey) 返回map的子map,其key 的范围是大于fromKey的。</li>
<li>SortedMap headMap(obj toKey) 返回该map的子Map,其key的范围是小于hokey的所有的key</li>
<li>Navigatable headMap(obj tokey,bool inclu) tokey是否包含取决于bool的值<h4 id="weakHashMap实现类"><a href="#weakHashMap实现类" class="headerlink" title="weakHashMap实现类"></a>weakHashMap实现类</h4>与HashMap的用法是一样的，只不过HashMap是强引用的，只要HashMap对象不被销毁，那么所有的key就都不会被垃圾回收机制回收，也不会自动删除这些key对应的key-value对。但是weakHashMap是弱引用的，如果该对象的key 没有被强引用变量引用，则这些key所引用的对象可能被垃圾回收，也可能自动删除这些key 所对应的key-value对。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	WeakHashMap&lt;String, String&gt; whm = <span class="keyword">new</span> WeakHashMap&lt;String, String&gt;();</span><br><span class="line">	whm.put(<span class="keyword">new</span> String(<span class="string">"语文"</span>), <span class="keyword">new</span> String(<span class="string">"良好"</span>));</span><br><span class="line">	whm.put(<span class="keyword">new</span> String(<span class="string">"数学"</span>), <span class="keyword">new</span> String(<span class="string">"及格"</span>));</span><br><span class="line">	whm.put(<span class="keyword">new</span> String(<span class="string">"英文"</span>), <span class="keyword">new</span> String(<span class="string">"中等"</span>));</span><br><span class="line">	System.out.println(whm);</span><br><span class="line">	whm.put(<span class="string">"java"</span>,<span class="string">"dsdfs"</span>);</span><br><span class="line">	System.gc();</span><br><span class="line">	System.runFinalization();</span><br><span class="line">	System.out.println(whm);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结果</span></span><br><span class="line">&#123;英文=中等, 数学=及格, 语文=良好&#125;</span><br><span class="line">&#123;java=dsdfs&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>从上面的程序中，我们可以看出，在系统进行垃圾回收的时候，前面new的对象全部被回收了，但是使用字符串java的变量还在，这是因为前面三个都是匿名的对象，weakHashMap只保留了它的弱引用，但是第四个的key是一个字符串直接量，系统会保留它的强引用，所以垃圾回收机制不会回收。</p>
<h4 id="IdentityHashMap实现类"><a href="#IdentityHashMap实现类" class="headerlink" title="IdentityHashMap实现类"></a>IdentityHashMap实现类</h4><p>这个实现类与HashMap的类是实现机制是相同的，主要的区别在于当且仅当两个key严格相等的时候(key1 == key2)的时候，该类才能判定两个ke y相等。对于普通的HashMap而言，只要key1 和key2 通过equals()方法比较返回true,且它们的hashCode值相等即可。</p>
<h4 id="EnumMap-实现类"><a href="#EnumMap-实现类" class="headerlink" title="EnumMap 实现类"></a>EnumMap 实现类</h4><p>EnumMap是一个与枚举类一起使用的map实现，EnumMap中的所有key必须是单个枚举类的枚举值。创建EnumMap的时候，必须显示或者隐示的指定它对应的枚举类。<br>根据key的自然顺序来维护key-value 对的顺序。<br>EnumMap 不允许使用null作为key，但是允许使用null作为value.<br>创建EnumMap的时候，必须指定一个枚举类，从而将该EnumMap和指定枚举类关联起来。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.EnumMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Season&#123;</span><br><span class="line">	SPRING,SUMMER,FALL,WINTER</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	EnumMap&lt;Season, String&gt; sE = <span class="keyword">new</span> EnumMap&lt;Season, String&gt;(Season.class);</span><br><span class="line">	sE.put(Season.FALL, <span class="string">"dsdf"</span>);</span><br><span class="line">	sE.put(Season.SPRING, <span class="string">"dsdfsd"</span>);</span><br><span class="line">	System.out.println(sE);</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Map实现类的性能分析"><a href="#Map实现类的性能分析" class="headerlink" title="Map实现类的性能分析"></a>Map实现类的性能分析</h4><ul>
<li>HashMap与Hashtable的效率大致相同，实现机制几乎一样，但是Hashtable是线程同步的。</li>
<li>TreeMap 通常比HashMap、Hashtable要慢，因为TreeMap 底层采用红黑树来管理。</li>
<li>对于一般的应用场景，程序应该多考虑使用HashMap，因为HashMap正是为查询设计的。</li>
<li>LinkedHashMap比HashMap 慢一点，因为它需要维护链表来保持Map中的key-value时的添加顺序。<h4 id="HashSet-和-HashMap的性能选项"><a href="#HashSet-和-HashMap的性能选项" class="headerlink" title="HashSet 和 HashMap的性能选项"></a>HashSet 和 HashMap的性能选项</h4>对于HashSet及其子类而言，它们采用hash算法来决定集合中元素的存储位置，并通过hash算法来控制集合的大小；对于HashMap、Hashtable及其子类而言，它们采用hash算法来决定Map中key的存储，并通过hash算法来增加key集合的大小。<br>hash表里面可以存储元素的位置被称为“桶”，通常情况下，单个“桶”里面存储一个元素，此时有最好的性能。<h2 id="操作集合的工具类：Collections"><a href="#操作集合的工具类：Collections" class="headerlink" title="操作集合的工具类：Collections"></a>操作集合的工具类：Collections</h2>Java提供了一个Set、List和Map的工具类：Collection,该工具类里面提供了大量的方法可以对集合进行排序、删除、查找、设置集合为不可变、对集合对象实现同步控制等方法。<h3 id="排序操作"><a href="#排序操作" class="headerlink" title="排序操作"></a>排序操作</h3></li>
<li>static void reverse(List list) 反转指定集合的元素</li>
<li>static void shuffle(List list) 对集合元素进行随机排序</li>
<li>static void sort(List list) 根据自然排序对集合进行升序排序</li>
<li>static void sort(List list,Comparator c) 根据指定的规则对集合进行排序</li>
<li>satic void swap(List list, int I,int j) 将指定的Lis t集合中的I处的元素和j处的元素进行交换。</li>
<li>static void rotate(List list, int distance) <ul>
<li>distance 为正数的时候，将list集合的后distance 个元素“整体”移到前面</li>
<li>为负数的时候，将list集合的前distance 个元素整体移到后面<br>使用语法：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; ls = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">	ls.add(<span class="number">1</span>);</span><br><span class="line">	ls.add(<span class="number">2</span>);</span><br><span class="line">	ls.add(<span class="number">3</span>);</span><br><span class="line">	ls.add(<span class="number">4</span>);</span><br><span class="line">	System.out.println(ls);</span><br><span class="line">	Collections.reverse(ls);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="查找替换操作"><a href="#查找替换操作" class="headerlink" title="查找替换操作"></a>查找替换操作</h3><ul>
<li>static int binarySearch(List list,Object key) 使用二分搜索方法 搜索指定的集合，获得指定对象在集合中的索引</li>
<li>static Object max(Collect coll) 根据元素的自然排序，返回集合中的最大元素</li>
<li>static Object max(Collection Coll,Comparator comp) 根据指定的排序方法，返回最大的值</li>
<li>min 同理</li>
<li>static void fill(List list,Object obj) 使用指定元素obj替换指定 List集合中的所有元素</li>
<li>static int frequency(Collection c ,Object o) 返回指定集合中指定元素出现的次数</li>
<li>static int indexOfSubList(List source,List target): 返回子list对象在父List对象中第一次出现的位置索引；如果父List中没有出现，则返回-1</li>
<li>static int lastIndexOfSubList(List source,List target) 返回子List对象在父List中最后一次出现的位置索引</li>
<li>static boolean replaceAll(List list,Object oldVal,Object newVal) 使用一个新值newVal替换List对象的所有旧的oldVal<h3 id="同步控制"><a href="#同步控制" class="headerlink" title="同步控制"></a>同步控制</h3>Collections类中提供了多个synchronizedXxx() 方法，可以将指定的集合包装成线程同步的集合<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Collection c = Collections.synchronizedCollection(<span class="keyword">new</span> ArrayList())</span><br><span class="line">List ls = Collections.synchronizedList(<span class="keyword">new</span> ArrayList());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="设置不可变对象"><a href="#设置不可变对象" class="headerlink" title="设置不可变对象"></a>设置不可变对象</h3><ul>
<li>emptyXxx() 返回一个空的、不可变的集合对象</li>
<li>singletonXxx() 返回一个只包含指定对象的、不可变的集合对象</li>
<li>unmodiifiableXxx() 返回指定集合对象的不可变视图<br>上面的意思是生成的集合只能读取</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2020/12/25/Java集合总结/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="Java集合总结">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-华为云RDS操作实践" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/12/17/华为云RDS操作实践/" class="article-date">
  	<time datetime="2020-12-17T11:35:49.343Z" itemprop="datePublished">2020-12-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/17/华为云RDS操作实践/">
        华为云RDS操作实践
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="购买华为云RDS"><a href="#购买华为云RDS" class="headerlink" title="购买华为云RDS"></a>购买华为云RDS</h3><p>登陆华为云账号，在右上角有一个 购买数据库实例，点击即可。<br>购买成功后，回在控制台显示实例名称，然后输入用户名以及密码登陆即可。</p>
<h3 id="在-MySQL-数据库建立一个海洋环境信息表，存储某一地点不同日期一天中不同时间的海洋观测数据，包括日期，时间，经度，维度，风向，风速，压力，温度，温度。"><a href="#在-MySQL-数据库建立一个海洋环境信息表，存储某一地点不同日期一天中不同时间的海洋观测数据，包括日期，时间，经度，维度，风向，风速，压力，温度，温度。" class="headerlink" title="在 MySQL 数据库建立一个海洋环境信息表，存储某一地点不同日期一天中不同时间的海洋观测数据，包括日期，时间，经度，维度，风向，风速，压力，温度，温度。"></a>在 MySQL 数据库建立一个海洋环境信息表，存储某一地点不同日期一天中不同时间的海洋观测数据，包括日期，时间，经度，维度，风向，风速，压力，温度，温度。</h3><p>我们可以在登陆的首页处先点击创建一个数据库<br><img src="https://img-blog.csdnimg.cn/20201216164755314.png" alt="在这里插入图片描述"><br>然后创建完毕后，点击数据库的名字，进入到该数据库里面去，在数据库里面建立一张数据表名！两种方式创建</p>
<ul>
<li><p>可以通过点击创建数据表进行创建，需要填写表名，以及字符集（这里我们使用utf-8字符集就可以了）<br><img src="https://img-blog.csdnimg.cn/20201216170312472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</li>
<li><p>通过执行sql语句进行创建(操作不熟练的，直接操作界面更方便一些）<br>如果想要使用Sql语句进行执行，可以点击页面头部的Sql窗口按钮。这样就可以通过sql语句进行执行了。</p>
</li>
</ul>
<p>经过上面的操作，我们已经拥有一张自己的表格了。</p>
<h3 id="将-Excel-表格的海洋环境数据导入本地-MySQL-数据库。迁移-MySQL-数据，把本地海洋观测MySQL-数据库迁移到华为云数据库。"><a href="#将-Excel-表格的海洋环境数据导入本地-MySQL-数据库。迁移-MySQL-数据，把本地海洋观测MySQL-数据库迁移到华为云数据库。" class="headerlink" title="将 Excel 表格的海洋环境数据导入本地 MySQL 数据库。迁移 MySQL 数据，把本地海洋观测MySQL 数据库迁移到华为云数据库。"></a>将 Excel 表格的海洋环境数据导入本地 MySQL 数据库。迁移 MySQL 数据，把本地海洋观测MySQL 数据库迁移到华为云数据库。</h3><p>首先我们先要在本地安装navicat数据库 图形化界面工具。关于这个工具，我就不再赘述了。网上有很多的使用教程。安装配置好之后，在自己 创建的数据库中，点击文件-&gt; 导入向导-&gt;然后选择自己要导入的对应的数据文件即可。</p>
<p> 在接下来的操作中，如果你是想尝试第一种方式，那么就在navicat中导出数据库文件为d b文件或者csv文件。如果是想尝试第二种方法就导出为sql脚本可执行文件，然后使用文本编辑器打开即可。</p>
<h4 id="方式一-通过导入本地的数据库，然后使用OBS桶进行数据库迁移"><a href="#方式一-通过导入本地的数据库，然后使用OBS桶进行数据库迁移" class="headerlink" title="方式一 通过导入本地的数据库，然后使用OBS桶进行数据库迁移"></a>方式一 通过导入本地的数据库，然后使用OBS桶进行数据库迁移</h4><p><img src="https://img-blog.csdnimg.cn/20201216171040607.png" alt="在这里插入图片描述"><br>可以看到这个位置有一个导入的按钮 ，我们点击进去，然后新建一个导入的位置<br><img src="https://img-blog.csdnimg.cn/20201216171214572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>可以看到这里有一个OBS桶，如果没有的话，我们自己创建一个就可以了。然后点击或将文件拖动到此处后上传文件字样，就可以创建一个导入任务了。（这里我没有导入成功）</p>
<h4 id="方式二-手动通过Sql语句导入"><a href="#方式二-手动通过Sql语句导入" class="headerlink" title="方式二  手动通过Sql语句导入"></a>方式二  手动通过Sql语句导入</h4><p>将导出的s q l可执行语句，放入到华为数据库的SQL查询处执行SQL语句。就将数据导入进去了。但是在导入的过程中，出现了一个问题，就是我们在建立表的时候，建立的是有id的数据表，但是我们在本地建设数据库的时候并没有包含着一列。因此，我们要修改一下表，删除第一列id。在执行语句。<br><img src="https://img-blog.csdnimg.cn/20201216201157475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后等待执行结束就可以了！<br><img src="https://img-blog.csdnimg.cn/20201216202952877.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>这样我们的数据库的内容，就全部迁移过去了,有点费劲。现在有个问题就是，这样我们的数据集就没有了主键。因此就不能进行编辑操作。因此，我们需要返回对象列表，点击修改表，点击修改字段部分，然后在第一行插入一个字段，我们称之为id。然后将这一列设置为主键，并且自动增长。<br><img src="https://img-blog.csdnimg.cn/20201216203412818.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>这样我们的数据库的操作就完成了。</p>
<p>当然数据库迁移的方式还有很多很多，比如我们可以直接写一个程序从本地数据库读取，然后往华为数据库添加，也是可以的。或者华为云提供的其他的迁移方式。</p>
<h4 id="求每天最大风速的时间和风向（结果可能多条记录）"><a href="#求每天最大风速的时间和风向（结果可能多条记录）" class="headerlink" title="求每天最大风速的时间和风向（结果可能多条记录）"></a>求每天最大风速的时间和风向（结果可能多条记录）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> OBDATE, <span class="built_in">Time</span>, WIND_SPD, WIND_DIR</span><br><span class="line"><span class="keyword">FROM</span> marinedata m1</span><br><span class="line"><span class="keyword">WHERE</span> WIND_SPD <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(WIND_SPD)</span><br><span class="line">	<span class="keyword">FROM</span> marinedata m2</span><br><span class="line">	<span class="keyword">WHERE</span> m1.OBDATE = m2.OBDATE</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> OBDATE</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>我用的数据集的结果为：<br><img src="https://img-blog.csdnimg.cn/20201216214055680.png" alt="在这里插入图片描述"></p>
<h4 id="求每天最小风速的时间和风向（结果可能多条记录）"><a href="#求每天最小风速的时间和风向（结果可能多条记录）" class="headerlink" title="求每天最小风速的时间和风向（结果可能多条记录）"></a>求每天最小风速的时间和风向（结果可能多条记录）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> OBDATE, <span class="built_in">Time</span>, WIND_SPD, WIND_DIR</span><br><span class="line"><span class="keyword">FROM</span> marinedata m1</span><br><span class="line"><span class="keyword">WHERE</span> WIND_SPD <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">MIN</span> (WIND_SPD)</span><br><span class="line">	<span class="keyword">FROM</span> marinedata m2</span><br><span class="line">	<span class="keyword">WHERE</span> m1.OBDATE = m2.OBDATE</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> OBDATE</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20201216214446329.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h4 id="求温度最低时的时间，风速和风向"><a href="#求温度最低时的时间，风速和风向" class="headerlink" title="求温度最低时的时间，风速和风向"></a>求温度最低时的时间，风速和风向</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> OBDATE, <span class="built_in">Time</span>, WIND_SPD, WIND_DIR</span><br><span class="line"><span class="keyword">FROM</span> marinedata m1</span><br><span class="line"><span class="keyword">WHERE</span> TEMPERATURE_DB  <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">MIN</span> (TEMPERATURE_DB )</span><br><span class="line">	<span class="keyword">FROM</span> marinedata m2</span><br><span class="line">	<span class="keyword">WHERE</span> m1.OBDATE = m2.OBDATE</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> OBDATE</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20201216220213432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h4 id="求温度最高时的时间，风速和风向"><a href="#求温度最高时的时间，风速和风向" class="headerlink" title="求温度最高时的时间，风速和风向"></a>求温度最高时的时间，风速和风向</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> OBDATE, <span class="built_in">Time</span>, WIND_SPD, WIND_DIR</span><br><span class="line"><span class="keyword">FROM</span> marinedata m1</span><br><span class="line"><span class="keyword">WHERE</span> TEMPERATURE_DB  <span class="keyword">IN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(TEMPERATURE_DB )</span><br><span class="line">	<span class="keyword">FROM</span> marinedata m2</span><br><span class="line">	<span class="keyword">WHERE</span> m1.OBDATE = m2.OBDATE</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> OBDATE</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20201216220456833.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="求平均风速和温度"><a href="#求平均风速和温度" class="headerlink" title="求平均风速和温度"></a>求平均风速和温度</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(WIND_SPD) <span class="keyword">AS</span> Average_WIND_SP, <span class="keyword">AVG</span>(TEMPERATURE_DB) <span class="keyword">AS</span> Average_Temp</span><br><span class="line"><span class="keyword">FROM</span> marinedata</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20201216221636266.png#pic_center" alt="在这里插入图片描述"></p>
<h4 id="求温差最大的日期"><a href="#求温差最大的日期" class="headerlink" title="求温差最大的日期"></a>求温差最大的日期</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> OBDATE, <span class="built_in">Time</span>, TEMPERATURE_DB - TEMPERATURE_DP <span class="keyword">AS</span> DIFF</span><br><span class="line"><span class="keyword">FROM</span> marinedata</span><br><span class="line"><span class="keyword">WHERE</span> TEMPERATURE_DB - TEMPERATURE_DP = (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(TEMPERATURE_DB - TEMPERATURE_DP)</span><br><span class="line">	<span class="keyword">FROM</span> marinedata</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20201217101826858.png" alt="在这里插入图片描述"></p>
<h3 id="用户权限控制"><a href="#用户权限控制" class="headerlink" title="用户权限控制"></a>用户权限控制</h3><h4 id="练习创建不同的用户，并实现不同的权限控制语句"><a href="#练习创建不同的用户，并实现不同的权限控制语句" class="headerlink" title="练习创建不同的用户，并实现不同的权限控制语句"></a>练习创建不同的用户，并实现不同的权限控制语句</h4><ul>
<li>界面操作<br>其他操作-&gt;用户操作<br><img src="https://img-blog.csdnimg.cn/20201217104608148.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>主机地址表示允许通过此用户访问数据库服务器的客户端IP地址白名单，不填或填%表示所有IP地址。<br><img src="https://img-blog.csdnimg.cn/20201217105702616.png" alt="在这里插入图片描述"><br>这里我们可以看到一些对全局表的操作权限设置。这里我配置一个select的权限测试一下。</li>
</ul>
<p>如果想要对某一个数据库进行权限赋予，则需要在对象权限里面进行编辑，如果想要针对某一个表的话，则需要在表/视图里面进行勾选，选择相应的表格即可。<br><img src="https://img-blog.csdnimg.cn/20201217105925126.png" alt="在这里插入图片描述"><br>这里我选择了 select 和 Delete的权限</p>
<p>然后返回到登陆界面，新增一个数据库登陆，将我们刚刚新添加的数据库的登陆添加上，测试连接成功后即可使用。<br><img src="https://img-blog.csdnimg.cn/20201217111327362.png" alt="在这里插入图片描述"><br>现在我执行一个updata操作，看结果<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---------------开始执行---------------</span><br><span class="line">【拆分SQL完成】：将执行SQL语句数量：（<span class="number">1</span>条）</span><br><span class="line">【执行SQL：(<span class="number">1</span>)】</span><br><span class="line">UPDATE marinedata SET TEMPERATURE_DB =<span class="number">0</span> WHERE id =<span class="number">1</span></span><br><span class="line">执行失败，失败原因：UPDATE command denied to user <span class="string">'666'</span>@<span class="string">'***'</span> <span class="keyword">for</span> table <span class="string">'marinedata'</span></span><br></pre></td></tr></table></figure></p>
<p>可以看到，执行失败了，因为我没有给这个表赋予updata权限。<br>我们在执行一个select的操作，查询id为2的数据<br><img src="https://img-blog.csdnimg.cn/20201217111939871.png" alt="在这里插入图片描述"><br>可以看到我们已经执行成功了。</p>
<ul>
<li>语句操作</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*COMMON SETTINGS</span></span><br><span class="line"><span class="comment">创建一个用户，666代表用户名，100.% 表示所有的ip地址都可以访问，我们也可以换成指定的ip地址。identified by表示的是用户的密码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'666'</span>@<span class="string">'100.%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'******'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*GLOBAL SETTINGS</span></span><br><span class="line"><span class="comment">权限分配的语句为GRANT，这条语句的意思是将SELECT这个权限给所有的表，用户为666这个用户</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'666'</span>@<span class="string">'100.%'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="权限授权和回收"><a href="#权限授权和回收" class="headerlink" title="权限授权和回收"></a>权限授权和回收</h4><p>权限授权上面已经说了，权限回收的界面操作，按照上面的步骤将勾选的权限删除掉即可。<br>使用语句进行权限回收-<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span> <span class="keyword">ON</span> *.* <span class="keyword">FROM</span> <span class="string">'666'</span>@<span class="string">'100.%'</span>;</span><br></pre></td></tr></table></figure></p>
<p>【拆分SQL完成】：将执行SQL语句数量：（1条）<br>【执行SQL：(1)】<br>REVOKE SELECT ON <em>.</em> FROM ‘666‘@’100.%’<br>执行成功，耗时：[13ms.]</p>
<p>这样权限就回收了</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2020/12/17/华为云RDS操作实践/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="华为云RDS操作实践">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-BOM_DOM编程总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/12/05/BOM_DOM编程总结/" class="article-date">
  	<time datetime="2020-12-05T06:52:20.650Z" itemprop="datePublished">2020-12-05</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/05/BOM_DOM编程总结/">
        js-BOM_DOM总结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h2><p>Browser Object Model(浏览器对象模型)<br>JS是由浏览器中内置的js脚本执行解释器程序来执行js的脚本语言的。<br>为了方便操作，js封装了对浏览器的各个对象使得开发者可以方便的操作浏览器。</p>
<h3 id="window对象"><a href="#window对象" class="headerlink" title="window对象"></a>window对象</h3><p>是javascript层级中的顶层对象，是代表浏览器窗口或一个框架，该对象在<body>或者<frameset>每次出现的时候都被自动创建。</frameset></body></p>
<ul>
<li>moveto() 将窗口左上角的屏幕位置移动到指定的x和y位置</li>
<li>moveby() 相对于目前的位置移动</li>
<li>resizeTo() 调整当前浏览器的窗口</li>
<li>open() 打开新的窗口显示指定的URL</li>
<li>setTimeout(vCode,iMilliseconds) 超时后执行代码</li>
<li>setInterval(vCode,iMilliSeconds) 定时执行代码，第一次也是先到执行时在执行<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3>所有的事件都是以o n开头，后面的是事件的触发方式。如：<br>o’clock 表示单击<br>onkeydown 表示键按下</li>
</ul>
<h4 id="鼠标点击事件"><a href="#鼠标点击事件" class="headerlink" title="鼠标点击事件"></a>鼠标点击事件</h4><ul>
<li>o’clock 用户使用鼠标左键单击对象的时候触发</li>
<li>ondbclick 当用户双击对象的时候触发</li>
<li>onmousedown 当用户在鼠标位于对象之上的时候，释放鼠标按钮时候触发</li>
<li>onmouseout 当用户将鼠标指针移出对象边界的时候触发</li>
<li>onmousemove 当用户将鼠标划过对象的时候触发</li>
<li>onblur 在对象失去输入焦点的时候触发</li>
<li>onfocus 当对象获得焦点的时候触发</li>
<li>onchange 当对象或选中区的内容改变的时候触发</li>
<li>o load 在浏览器完成对象的装载后立即触发</li>
<li><p>o submit 当表单将要被提交的时候触发</p>
<h3 id="location对象"><a href="#location对象" class="headerlink" title="location对象"></a>location对象</h3><p>location对象是由js runtime engine自动创建的，包含有关当前URL 的信息。<br>location 中的重要方法：</p>
<pre><code>href 属性 设置或获取整个 URL 为字符串
reload（）重新装入当前页面
</code></pre><h3 id="screen-对象"><a href="#screen-对象" class="headerlink" title="screen 对象"></a>screen 对象</h3><p>js自动创建的，包含有关客户机显示屏幕的信息<br>属性：</p>
<ul>
<li>availHeight 获取系统屏幕的工作区域高度 ，排除任务栏</li>
<li>availWidth 获取系统屏幕的工作区域的宽度 排除任务栏</li>
<li>height 获取屏幕的垂直分辨率</li>
<li>width 获取屏幕的水平分辨率</li>
</ul>
<p>案例：</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="string">"屏幕工作区: "</span> + screen.availHeight + <span class="string">", "</span> + screen.availWidth + <span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">	<span class="built_in">document</span>.write(<span class="string">"屏幕分辨率: "</span> + screen.height + <span class="string">", "</span> + screen.width + <span class="string">"&lt;br&gt;"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="document-对象"><a href="#document-对象" class="headerlink" title="document 对象"></a>document 对象</h3><p>该对象代表整个文档页面<br>对象的集合：</p>
<ul>
<li>all 获取页面所有的元素对象</li>
<li>forms 获取页面所有的表单对象</li>
<li>images 获取页面所有的图片对象</li>
<li>links 获取所有的超链接 或者area对象<h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2>全称Document Object Model 即文档对象模型。<br>该模型描绘了一个层次化的树，允许开发人员添加、删除、修改页面的某一部分。<br>浏览器在解析HTML的时候，其实不是按照一行一行读取并解析的，而是将HTML页面中的每一个标记按照顺序在内存中组建一颗DOM树，组建好之后，按照树的结构将页面显示在浏览器窗口中。</li>
</ul>
<p>节点最多有一个父亲节点，可以有多个子节点。<br>HTML DOM 定义访问和操作HTML 文档的标准方法。</p>
<ul>
<li>document 代表当前页面的整个文档树</li>
<li><p>访问属性</p>
<ul>
<li>all</li>
<li>forms</li>
<li>images</li>
<li>links</li>
<li>body</li>
</ul>
<p>访问方法（最常用的是DOM方法）</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">      <span class="comment">//获取Dom树 获取document对象</span></span><br><span class="line">      <span class="keyword">var</span> dom  = <span class="built_in">window</span>.document;</span><br><span class="line">      <span class="comment">//获取界面的所有元素</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">testAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> allarr = dom.all;</span><br><span class="line">          alert(allarr.length);</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span>  i =<span class="number">0</span>;i&lt;allarr.length;i++)&#123;</span><br><span class="line">              <span class="comment">//获取节点的名字</span></span><br><span class="line">              alert(allarr[i].nodeName)</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//anchors 获取页面中的所有锚连接</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">testAnchors</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> anaArr = dom.anchors;</span><br><span class="line">          alert(anaArr.length);</span><br><span class="line">          alert(anaArr[<span class="number">0</span>].nodeName);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//获取所有的form对象</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">testForms</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> formARR = dom.forms;</span><br><span class="line">          alert(formARR.length)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//images</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">testimage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> ima = dom.images;</span><br><span class="line">          alert(ima.length)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//获取页面的所有连接</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">testlinks</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> lin = dom.links;</span><br><span class="line">          alert(lin.length)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="获取节点对象的案例"><a href="#获取节点对象的案例" class="headerlink" title="获取节点对象的案例"></a>获取节点对象的案例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getobj</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="comment">//根据标签id获取对象</span></span><br><span class="line">            <span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">"1"</span>)</span><br><span class="line">            alert(a.nodeName)</span><br><span class="line">           <span class="comment">//根据标标签属性名称获取对象</span></span><br><span class="line">            <span class="keyword">var</span> b = <span class="built_in">document</span>.getElementsByName(<span class="string">"bu"</span>)</span><br><span class="line">            alert(b.length)</span><br><span class="line"></span><br><span class="line">            <span class="comment">//根据标签名称获取对象</span></span><br><span class="line">            <span class="keyword">var</span> c = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"p"</span>)</span><br><span class="line">            alert(c.length)</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h3 id="通过节点关系查找节点"><a href="#通过节点关系查找节点" class="headerlink" title="通过节点关系查找节点"></a>通过节点关系查找节点</h3><p>//从一个节点开始出发 进行查找</p>
<ul>
<li>parentNode 获取当前节点的父亲节点</li>
<li>childNodes 获取当前节点的孩子节点</li>
<li>firstChild 获取当前节点的第一个孩子节点</li>
<li>lastChild 获取当前节点的最后一个孩子节点</li>
<li>nextSibling 获取当前节点的兄弟节点<br> 注意这个有一个隐藏的文本标签 </li>
<li>previousSibling 获取当前节点的上一个节点<h3 id="获取节点对象的信息"><a href="#获取节点对象的信息" class="headerlink" title="获取节点对象的信息"></a>获取节点对象的信息</h3>每个节点都包含的信息的，这些属性是：</li>
<li>nodType 节点类型</li>
<li>元素  返回1 </li>
<li>文本 返回3</li>
<li>注释 返回8</li>
<li>nodeName 节点名称</li>
<li>元素节点的nodeName是标签的名称</li>
<li>属性节点的nodeName是属性名称</li>
<li>文本节点的nodeName 永远是#text</li>
<li>文档节点的nodeName 永远是#document</li>
<li>nodeValue 节点值</li>
<li>对于文本节点 nodeValue 属性是包含的文本</li>
<li>对于属性节点 nodeValue属性是属性值</li>
<li>对于注释节点 nodeValue属性注释内容</li>
<li>nodeValue属性对文档节点和元素节点是不可用的<h2 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h2><h3 id="创建新的节点"><a href="#创建新的节点" class="headerlink" title="创建新的节点"></a>创建新的节点</h3></li>
<li>document.createElement(“标签名”) 创建新元素节点</li>
<li>elt.setAttribute(“属性名”,”属性值”）设置属性</li>
<li>elt.appendChild(e)</li>
<li>elt.insertBefore(new,child) 添加到elt中，child之前</li>
<li>elt.removeChild(eChild) 删除指定的子节点</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script type="text/</span>javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">       var count =1;</span></span><br><span class="line"><span class="string">       function add() &#123;</span></span><br><span class="line"><span class="string">           var trNode = document.createElement("</span>tr<span class="string">");</span></span><br><span class="line"><span class="string">           var tdNode = document.createElement("</span>td<span class="string">");</span></span><br><span class="line"><span class="string">           var inputNode  = document.createElement("</span>input<span class="string">");</span></span><br><span class="line"><span class="string">           inputNode.setAttribute("</span>type<span class="string">","</span>button<span class="string">");</span></span><br><span class="line"><span class="string">           inputNode.setAttribute("</span>value<span class="string">",count++);</span></span><br><span class="line"><span class="string">           count++;</span></span><br><span class="line"><span class="string">           tdNode.appendChild(inputNode);</span></span><br><span class="line"><span class="string">           trNode.appendChild(tdNode);</span></span><br><span class="line"><span class="string">           //trNode添加到指定的位置上</span></span><br><span class="line"><span class="string">           var tbodyNode = document.getElementsByTagName("</span>tbody<span class="string">")[0];</span></span><br><span class="line"><span class="string">           var button1 = document.getElementById("</span>b1<span class="string">");</span></span><br><span class="line"><span class="string">           tbodyNode.insertBefore(trNode,button1);</span></span><br><span class="line"><span class="string">       &#125;</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">  &lt;table&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;</span></span><br><span class="line"><span class="string">              &lt;input type="</span>button<span class="string">" value="</span><span class="number">0</span><span class="string">" &gt;</span></span><br><span class="line"><span class="string">          &lt;/td&gt;</span></span><br><span class="line"><span class="string">      &lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;tr id="</span>b1<span class="string">"&gt;</span></span><br><span class="line"><span class="string">          &lt;td&gt;</span></span><br><span class="line"><span class="string">              &lt;input type="</span>button<span class="string">" value="</span>添加<span class="string">" onclick="</span>add()<span class="string">"&gt;</span></span><br><span class="line"><span class="string">          &lt;/td&gt;</span></span><br><span class="line"><span class="string">      &lt;/tr&gt;</span></span><br><span class="line"><span class="string">  &lt;/table&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="几个小案例"><a href="#几个小案例" class="headerlink" title="几个小案例"></a>几个小案例</h2><h3 id="生成二级城市联动菜单"><a href="#生成二级城市联动菜单" class="headerlink" title="生成二级城市联动菜单"></a>生成二级城市联动菜单</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;二级联动菜单&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script type="text/</span>javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">        function selcity() &#123;</span></span><br><span class="line"><span class="string">            //每一个省建立一个二维数组</span></span><br><span class="line"><span class="string">            var arr = [['--选择城市--'],['海淀区','朝阳区','东城区','西城区']</span></span><br><span class="line"><span class="string">                ,['沈阳','大连','鞍山','抚顺']</span></span><br><span class="line"><span class="string">                ,['济南','青岛','烟台','威海']</span></span><br><span class="line"><span class="string">                ,['石家庄','廊坊','唐山','秦皇岛']];</span></span><br><span class="line"><span class="string">            //获取选择的省的角标</span></span><br><span class="line"><span class="string">            var selNode = document.getElementById("</span>selid<span class="string">");</span></span><br><span class="line"><span class="string">            var index = selNode.selectedIndex;</span></span><br><span class="line"><span class="string">            var cities = arr[index];</span></span><br><span class="line"><span class="string">            var subSelNode = document.getElementById("</span>subselid<span class="string">")</span></span><br><span class="line"><span class="string">            //清除下拉菜单的内容</span></span><br><span class="line"><span class="string">            subSelNode.options.length = 0;</span></span><br><span class="line"><span class="string">            for(var x =0;x&lt;cities.length;x++)&#123;</span></span><br><span class="line"><span class="string">               var optNode = document.createElement("</span>option<span class="string">");</span></span><br><span class="line"><span class="string">               optNode.innerHTML = cities[x];</span></span><br><span class="line"><span class="string">               subSelNode.appendChild(optNode);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">  &lt;select id="</span>selid<span class="string">" onchange="</span>selcity()<span class="string">"&gt;</span></span><br><span class="line"><span class="string">      &lt;option&gt;--选择省市--&lt;/option&gt;</span></span><br><span class="line"><span class="string">      &lt;option&gt;北京市&lt;/option&gt;</span></span><br><span class="line"><span class="string">      &lt;option&gt;辽宁省&lt;/option&gt;</span></span><br><span class="line"><span class="string">      &lt;option&gt;山东省&lt;/option&gt;</span></span><br><span class="line"><span class="string">      &lt;option&gt;河北省&lt;/option&gt;</span></span><br><span class="line"><span class="string">  &lt;/select&gt;</span></span><br><span class="line"><span class="string">  &lt;select id="</span>subselid<span class="string">"&gt;</span></span><br><span class="line"><span class="string">      &lt;option&gt;--选择城市--&lt;/option&gt;</span></span><br><span class="line"><span class="string">  &lt;/select&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="生产一个验证码"><a href="#生产一个验证码" class="headerlink" title="生产一个验证码"></a>生产一个验证码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;验证码&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script type="text/</span>javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">      function createCode() &#123;</span></span><br><span class="line"><span class="string">          var datas = ["</span>A<span class="string">", "</span>B<span class="string">", "</span>C<span class="string">", "</span>D<span class="string">", "</span>E<span class="string">", "</span>F<span class="string">", "</span>G<span class="string">", "</span>H<span class="string">", "</span>Z<span class="string">", "</span><span class="number">0</span><span class="string">", "</span><span class="number">1</span><span class="string">", "</span><span class="number">2</span><span class="string">", "</span><span class="number">3</span><span class="string">", "</span><span class="number">4</span><span class="string">", "</span><span class="number">5</span><span class="string">", "</span><span class="number">6</span><span class="string">", "</span><span class="number">7</span><span class="string">", "</span><span class="number">8</span><span class="string">", "</span><span class="number">9</span><span class="string">"];</span></span><br><span class="line"><span class="string">          //随机从数组中取出4个元素</span></span><br><span class="line"><span class="string">          var mess = "</span><span class="string">";</span></span><br><span class="line"><span class="string">          var index = 0;</span></span><br><span class="line"><span class="string">          for (var i = 0; i &lt; 4; i++) &#123;</span></span><br><span class="line"><span class="string">              //生成随机数 而且是在数组的长度范围内</span></span><br><span class="line"><span class="string">              //0-9 之间的随机数，Math.floor(Math.random()*10)</span></span><br><span class="line"><span class="string">              //0到数组长度（不包含）之间的浮点数 向下取整</span></span><br><span class="line"><span class="string">              var index = Math.floor(Math.random() * datas.length);</span></span><br><span class="line"><span class="string">              mess += datas[index];</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">          ;</span></span><br><span class="line"><span class="string">          var codeSpan = window.document.getElementById("</span>codeSpan<span class="string">");</span></span><br><span class="line"><span class="string">          codeSpan.style.color = "</span>red<span class="string">"</span></span><br><span class="line"><span class="string">          codeSpan.style.fontSize = "</span><span class="number">20</span>px<span class="string">"</span></span><br><span class="line"><span class="string">          codeSpan.style.background = "</span>gray<span class="string">"</span></span><br><span class="line"><span class="string">          codeSpan.style.fontStyle = "</span>italic<span class="string">"</span></span><br><span class="line"><span class="string">          codeSpan.style.textDecoration = "</span>line-through<span class="string">"</span></span><br><span class="line"><span class="string">          codeSpan.innerHTML = mess;</span></span><br><span class="line"><span class="string">          codeSpan.value = mess;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body onload="</span>createCode()<span class="string">"&gt;</span></span><br><span class="line">   &lt;span id="codeSpan"&gt;&lt;/span&gt;&lt;a href="#" onclick="createCode()"&gt;看不清楚&lt;/a&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2020/12/05/BOM_DOM编程总结/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="js-BOM_DOM总结">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Annotation" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/12/04/Annotation/" class="article-date">
  	<time datetime="2020-12-04T07:02:03.810Z" itemprop="datePublished">2020-12-04</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/04/Annotation/">
        Annotation总结
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>从JKD5开始，java增加了对元数据的支持，也就是Annotation,这是代码里的特殊标记，这些标记可以在编译、类加载、运行的是时候被读取，并且能够执行相应的处理。<br>通过使用Annotation ，我们可以在开发过程中，在不改变原有逻辑的情况下，在源文件中补充一些信息。<br>Annotation 可以用于修饰包、类、构造器、方法、成员变量、参数和局部变量的声明。</p>
<h2 id="四个基本的Annotation"><a href="#四个基本的Annotation" class="headerlink" title="四个基本的Annotation"></a>四个基本的Annotation</h2><h3 id="Override-重写父类方法"><a href="#Override-重写父类方法" class="headerlink" title="@Override (重写父类方法)"></a>@Override (重写父类方法)</h3><p>用来指定方法覆载的，它可以强制一个子类必须覆盖父类的方法。<br>在使用这个注解的时候，可能看不出来效果，这个的主要作用是检查一下父类中，是不是有一个相同的方法被重写！</p>
<h3 id="Deprecated-标示已经过时"><a href="#Deprecated-标示已经过时" class="headerlink" title="@Deprecated(标示已经过时)"></a>@Deprecated(标示已经过时)</h3><p>用于表示某个程序元素已经过时，当其他程序使用已经过时的类、方法的时候，编译器将会给出警告。</p>
<h3 id="SuppressWarnings-抑制编译器警告"><a href="#SuppressWarnings-抑制编译器警告" class="headerlink" title="@SuppressWarnings(抑制编译器警告)"></a>@SuppressWarnings(抑制编译器警告)</h3><p>指示被该Annotation修饰的程序元素取消显示指定的编译器警告，会一直作用于该程序元素的所有子元素。在使用的过程总，一定要在括号里面使用name = value的形式 ！即 @SuppressWarnings(value = “unchecked”)<br>unchecked就是一个未经过检查的转换</p>
<h3 id="java7-的堆污染警告-SafeVarargs"><a href="#java7-的堆污染警告-SafeVarargs" class="headerlink" title="java7 的堆污染警告@SafeVarargs"></a>java7 的堆污染警告@SafeVarargs</h3><p>当把一个不带范型的对象赋给一个带范型的变量的时候，往往就会发生“堆污染”。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">list.add(<span class="number">20</span>);</span><br></pre></td></tr></table></figure>
<p>对于形式参数可变的方法，该形参类型又是范型，这将更容易导致“堆污染”。<br>（java不支持范型数组）</p>
<h2 id="JDK基本的元Annotation"><a href="#JDK基本的元Annotation" class="headerlink" title="JDK基本的元Annotation"></a>JDK基本的元Annotation</h2><h3 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a>@Retention</h3><p>只能用来修饰一个Annotation定义，用于指定被修饰的Annotation可以存活多长时间。后面必须跟着一个值（三个限定）<br>例如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(value=RetentionPolicy.SOURCE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Testtable&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Target"><a href="#Target" class="headerlink" title="@Target"></a>@Target</h3><p>只能修饰一个Annotation定义，用于指定被修饰的Annotation能用于修饰哪些程序单元。(有八个程序变量的值)<br>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.FIELD)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ActionListenerErro&#123;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Documented"><a href="#Documented" class="headerlink" title="@Documented"></a>@Documented</h3><p>用于指定这个Annotation类可以被javadoc工具提取成文档.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="comment">//使用Documented修饰 一个类 用作Annotation ，这个类可以被javadoc工具提取成文档</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Testtable&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>然后使用Testtable修饰 其他类的方法，就会被提取成文档</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"><span class="meta">@Testtable</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">info</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"info方法..."</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Inherited"><a href="#Inherited" class="headerlink" title="@Inherited"></a>@Inherited</h3><p>如果定义某一个Annotation的时候，这个类被@Inherited修饰，则继承了该类的子类将会被@A修饰。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Inheritable&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中粗体字代码表明@Inheritable 具有继承性，如果某个类使用了@Inheritable修饰，则该类的子类将自动使用@Inheritable修饰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Inheritable</span></span><br><span class="line">class Base[</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//InheritableTest 类只继承了Base类</span></span><br><span class="line"><span class="comment">// 并未直接使用@Inheritable Annotiation修饰</span></span><br><span class="line">public class InheritableTest extends Base[</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//打印InheritableTest类是否具有@Inheritable修饰</span></span><br><span class="line">System.out.println(InheritableTest.class.isAnnotationPresent(Inheritable.class));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中的Ba se类使用@Inheritable修饰，而该Annotation具有继承性，所以其子类也将自动使用@Inheritable修饰。上面程序输出 true</p>
<h2 id="自定义Annotation"><a href="#自定义Annotation" class="headerlink" title="自定义Annotation"></a>自定义Annotation</h2><p>自定义Annotation使用@interface关键字定义一个新的Annotation 类型与定义一个接口非常像。</p>
<h3 id="标记Annotation-无参数"><a href="#标记Annotation-无参数" class="headerlink" title="标记Annotation(无参数)"></a>标记Annotation(无参数)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个简单的Annotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Test&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用Annotation的时候，通常可以用来修饰程序中的类、方法、变量、接口等定义。通常Annotation放在所有的修饰符之前。</p>
<h3 id="元数据Annotation-有参数"><a href="#元数据Annotation-有参数" class="headerlink" title="元数据Annotation(有参数)"></a>元数据Annotation(有参数)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> mytage&#123;</span><br><span class="line"><span class="function">String <span class="title">name</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>带有成员变量的Annotation 的定义是以无形参的方法形式来声明，其方法名和返回值定义了该成员变量的名字和类型。<br>在使用的时候，应该写为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@mytage</span>(name=<span class="string">"xx"</span>,age=<span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<h4 id="也可以设置默认值"><a href="#也可以设置默认值" class="headerlink" title="也可以设置默认值"></a>也可以设置默认值</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> mytage&#123;</span><br><span class="line"><span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> "yeeku"</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span> <span class="keyword">default</span> 2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="提取Annotation信息"><a href="#提取Annotation信息" class="headerlink" title="提取Annotation信息"></a>提取Annotation信息</h3><p>开发者使用Annotation 修饰了类、方法、Field等成员之后，这些Annotation不会自己生效，必须由开发者提供相应的工具来提取并处理Annotation信息。</p>
<p>java5在java.lang.reflect包下新增加了AnnotatedElement接口，该接口代表程序中可以接受注释的程序元素。<br>该接口主要有如下几个实现类：</p>
<ul>
<li>Class 类定义</li>
<li>Constructor 构造器定义</li>
<li>Field 类的成员变量定义</li>
<li>Method 类的方法定义</li>
<li>Package 类的包定义</li>
</ul>
<p>程序可以通过调用某一个类的如下三种方法来访问Annotation信息</p>
<ul>
<li>getAnnotation(Class<t> annoClass)</t></li>
<li>Annotation[] getAnnotations() 返回该程序元素上存在的所有的注释</li>
<li>boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass): 判断该程序上是否存在指定类型的注释，如果存在则返回true,否则返回false.<br><strong>例如：</strong>获取Test类的info 方法里面的所有的注释</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Annotation [] aArray = Class.forName(<span class="string">"Test"</span>).getMethod(<span class="string">"info"</span>).getAnnotations()</span><br></pre></td></tr></table></figure>
<h2 id="使用Annotation-的示例"><a href="#使用Annotation-的示例" class="headerlink" title="使用Annotation 的示例"></a>使用Annotation 的示例</h2><p>仅仅使用注释来标记程序元素是不会有任何影响的，为了让程序中的这些注释起作用，接下来必须为这些注释提供一个注释处理工具，注释处理工具通过分析目标类中的注释，然后在通过反射来运行标记的测试方法，程序可以做出相应的处理。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>在示例程序中通过使用@ActionListenerFor来为程序中的按钮绑定事件监听器</p>
<ul>
<li>首先创建一个标记，该标记需要传入一个监听器实现类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> AnnotationExample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.FIELD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ActionListenerFor &#123;</span><br><span class="line">  <span class="comment">//定义一个成员变量，用于设置元数据</span></span><br><span class="line">  <span class="comment">//该listener 成员变量用于保存监听器实现类</span></span><br><span class="line">	Class&lt;? extends ActionListener&gt; listener();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>然后，创建两个监听器的实现类<br>确认按钮实现类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> AnnotationExample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OkListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		JOptionPane.showMessageDialog(<span class="keyword">null</span>,<span class="string">"单击了确认按钮"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>取消按钮实现类</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> AnnotationExample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JOptionPane;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CancelListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		JOptionPane.showMessageDialog(<span class="keyword">null</span>,<span class="string">"单击了取消按钮"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果仅仅在程序中使用注释是不会起任何作用的，需要编写一个注释处理工具来处理程序中的注释</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> AnnotationExample;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.AbstractButton;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ActionListenerInstaller</span> </span>&#123;</span><br><span class="line">	<span class="comment">//处理Annotation 的方法，其中obj是包含Annotation的对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">processAnnotations</span><span class="params">(Object obj)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Class cl = obj.getClass();</span><br><span class="line">			<span class="comment">//获取指定的obj 对象的所有Field 并遍历每个field</span></span><br><span class="line">			<span class="keyword">for</span>(Field f: cl.getDeclaredFields()) &#123;</span><br><span class="line">				<span class="comment">//将指定的Field设置成可自由访问</span></span><br><span class="line">				f.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">				<span class="comment">//获取指定Field 上的ActionListenerFor类型的Annotation</span></span><br><span class="line">				ActionListenerFor a = f.getAnnotation(ActionListenerFor.class);</span><br><span class="line">				<span class="comment">//获取f Field 实际对应的对象</span></span><br><span class="line">				Object fobj = f.get(obj);</span><br><span class="line">				<span class="comment">//如果f是AbstractButton 的实例，并且a不为null</span></span><br><span class="line">				<span class="keyword">if</span>(a!=<span class="keyword">null</span> &amp;&amp; fobj != <span class="keyword">null</span> &amp;&amp; fobj <span class="keyword">instanceof</span> AbstractButton) &#123;</span><br><span class="line">					<span class="comment">//获取a注释 里的元数据listener (它是一个监听器类)</span></span><br><span class="line">					Class&lt;? extends ActionListener&gt; listenerClazz = a.listener();</span><br><span class="line">					<span class="comment">//使用反射来创建listener类的对象</span></span><br><span class="line">					ActionListener al = listenerClazz.newInstance();</span><br><span class="line">					AbstractButton ab = (AbstractButton)fobj;</span><br><span class="line">					<span class="comment">//为ab按钮添加事件监听器</span></span><br><span class="line">					ab.addActionListener(al);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>主程序</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> AnnotationExample;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationTest</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> JFrame mainWin = <span class="keyword">new</span> JFrame(<span class="string">"使用注释绑定事件监听器"</span>);</span><br><span class="line">	<span class="comment">//使用Annotation 为ok 按钮绑定事件监听器</span></span><br><span class="line">	<span class="meta">@ActionListenerFor</span>(listener = OkListener.class)</span><br><span class="line">	<span class="keyword">private</span> JButton ok = <span class="keyword">new</span> JButton(<span class="string">"确定"</span>);</span><br><span class="line">	<span class="meta">@ActionListenerFor</span>(listener = CancelListener.class)</span><br><span class="line">	<span class="keyword">private</span> JButton cancle = <span class="keyword">new</span> JButton(<span class="string">"取消"</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    	<span class="comment">//初始化界面的方法</span></span><br><span class="line">    	JPanel jp = <span class="keyword">new</span> JPanel();</span><br><span class="line">    	jp.add(ok);</span><br><span class="line">    	jp.add(cancle);</span><br><span class="line">    	mainWin.add(jp);</span><br><span class="line">    	<span class="comment">//</span></span><br><span class="line">    	ActionListenerInstaller.processAnnotations(<span class="keyword">this</span>);</span><br><span class="line">    	mainWin.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">    	mainWin.pack();</span><br><span class="line">    	mainWin.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">new</span> AnnotationTest().init();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="编译时处理Annotation"><a href="#编译时处理Annotation" class="headerlink" title="编译时处理Annotation"></a>编译时处理Annotation</h2><p>APT（Annotation Processing Tool）是一种注释处理工具，它对源代码文件进行检测找出其中的Annotation后，对Annotation 进行额外的处理。<br>Annotation处理器 在处理Annotation的时候可以根据源文件中的Annotation生成额外的源文件和其他文件，APT还会编译生成的源代码文件和原来的源文件，将他们一起生成class文件。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2020/12/04/Annotation/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="Annotation总结">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-NoSql和关系数据库的操作比较" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/11/13/NoSql和关系数据库的操作比较/" class="article-date">
  	<time datetime="2020-11-13T11:49:09.740Z" itemprop="datePublished">2020-11-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/13/NoSql和关系数据库的操作比较/">
        NoSql和关系数据库 的操作比较
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="NoSQL"><a href="#NoSQL" class="headerlink" title="NoSQL"></a>NoSQL</h2><p>NoSQL是一种不同于关系数据库管理系统设计方式，是对非关系型数据库的统称，它所采用的数据模型并非传统关系数据库的关系模型，而是类似键/值、列族、文档等非关系模型。NoSQL数据库没有固定的表结构，通常也不存在连接操作。<br>数据库的特点：</p>
<ul>
<li>扩展性<br>传统数据库很难实现横向扩展，NoSQL实现起来比较容易。</li>
<li>数据模型<br>关系模型是关系数据库的基石，它以完备的关系代数理论为基础。NoSQL数据库转用键/值、列族等非关系模型，允许在一个数据元素里面存储不同类型的数据。</li>
<li>与云计算紧密结合<br>云计算具有很好的水平扩展能力，可以根据资源使用情况进行自由伸缩，各种资源可以动态的加入。<h2 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL数据库</h2>对于Mysql数据库的学习，这一块就不记录了！<br><a href="https://cattlez.github.io/2020/06/25/%E9%98%BF%E9%87%8C%E4%BA%91Ubuntu%E4%B8%8A%E5%AE%89%E8%A3%85mysql%E5%B9%B6%E8%BF%90%E8%A1%8C/" target="_blank" rel="noopener">阿里云安装</a><br><a href="https://cattlez.github.io/2020/07/05/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B9%8B%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86/" target="_blank" rel="noopener">使用</a><h2 id="HBase"><a href="#HBase" class="headerlink" title="HBase"></a>HBase</h2><a href="https://cattlez.github.io/2020/10/15/%E5%A4%A7%E6%95%B0%E6%8D%AE-HBase%E5%AE%9E%E9%AA%8C%E4%BB%A5%E5%8F%8A%E8%AE%B2%E8%A7%A3/" target="_blank" rel="noopener">HBase的详细操作</a><br><img src="https://img-blog.csdnimg.cn/20201028105848597.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></li>
<li>3.a<br>首先启动shell<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hbase shell</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>执行创建表的操作(因为我里面有个student了就创建student2)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create <span class="string">'Student2'</span>,<span class="string">'score'</span></span><br></pre></td></tr></table></figure>
<p>添加数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">put <span class="string">'Student2'</span>,<span class="string">'lisi'</span>,<span class="string">'score:English'</span>,<span class="string">'55'</span></span><br></pre></td></tr></table></figure>
<p>查询数据</p>
<p><img src="https://img-blog.csdnimg.cn/2020102815210326.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<ul>
<li>3.b</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get <span class="string">'Student2'</span>,<span class="string">'zhangsan'</span>,<span class="string">'score:Computer'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>3.c</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20201028152345432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<ol start="4">
<li>HBase API<br>函数在HBase中已经介绍过了,进行如下调用即可</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">init();</span><br><span class="line">insertData(<span class="string">"Student2"</span>, <span class="string">"scofield"</span>, <span class="string">"score"</span>, <span class="string">"English"</span>, <span class="string">"45"</span>);</span><br><span class="line">insertData(<span class="string">"Student2"</span>, <span class="string">"scofield"</span>, <span class="string">"score"</span>, <span class="string">"Math"</span>, <span class="string">"89"</span>);</span><br><span class="line">insertData(<span class="string">"Student2"</span>, <span class="string">"scofield"</span>, <span class="string">"score"</span>, <span class="string">"Computer"</span>, <span class="string">"100"</span>);</span><br></pre></td></tr></table></figure>
<p>查询数据<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">init();</span><br><span class="line">getData(<span class="string">"Student2"</span>,<span class="string">"scofield"</span>,<span class="string">"score"</span>,<span class="string">"English"</span>);</span><br><span class="line">close();</span><br></pre></td></tr></table></figure></p>
<h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><p>（流泪～～好多软件，心疼我的机子呀！又要含泪安装～～～）</p>
<h3 id="先来简单的了解一下Redis吧"><a href="#先来简单的了解一下Redis吧" class="headerlink" title="先来简单的了解一下Redis吧"></a>先来简单的了解一下Redis吧</h3><p><a href="http://www.redis.cn/commands.html" target="_blank" rel="noopener">Redis的学习官网</a><br>Redis作为一个高性能的键值数据库，不仅在很大程度上弥补了memcached这类键值存储的不足(Redis值的存储最大可以为1GB)，而且在部分场合下可以对关系数据库起到很好的补充作用。</p>
<h3 id="Redis的安装"><a href="#Redis的安装" class="headerlink" title="Redis的安装"></a>Redis的安装</h3><p>安装软件的下载</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://download.redis.io/releases/redis-<span class="number">6.0</span>.<span class="number">9</span>.tar.gz</span><br><span class="line">$ sudo tar -zxvf ./redis-<span class="number">6.0</span>.<span class="number">9</span>.tar.gz -C /usr/local</span><br><span class="line">$ sudo mv ./redis-<span class="number">6.0</span>.<span class="number">9</span> ./redis</span><br></pre></td></tr></table></figure>
<p>更改目录的操作权限</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R hadoop:hadoop ./redis</span><br></pre></td></tr></table></figure>
<p>接下来，进入“/usr/local/redis”目录，输入以下命令编译和安装Redis</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure>
<p>然后开启redi s的服务<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/redis</span><br><span class="line">$ ./src/redis-server</span><br></pre></td></tr></table></figure></p>
<p>安装成功后会显示：<br><img src="https://img-blog.csdnimg.cn/2020111311252382.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>接下来在开一个终端：<br>启动redis的客户端：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/redis</span><br><span class="line">$ ./src/redis-cli</span><br></pre></td></tr></table></figure>
<p>会显示：<br><code>127.0.0.1:6379&gt;</code><br>客户端连上服务器之后，会显示“127.0.0.1:6379&gt;”的命令提示符信息，表示服务器的IP地址为127.0.0.1，端口为6379。现在可以执行简单的操作。<br>操作任务同上<br><img src="https://img-blog.csdnimg.cn/20201028154815299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5NTM2NzE2,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h3 id="Redis-shell-的操作："><a href="#Redis-shell-的操作：" class="headerlink" title="Redis shell 的操作："></a>Redis shell 的操作：</h3><ul>
<li>设计数据表<br>lisi的插入操作过程是一样的：<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; hset student.zhangsan English <span class="number">69</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; hset student.zhangsan Math <span class="number">86</span></span><br><span class="line">(integer) <span class="number">1</span></span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; hset student.zhangsan Computer <span class="number">77</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>查询zhangsan的成绩：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; hgetall student.zhangsan</span><br><span class="line"><span class="number">1</span>) <span class="string">"Math"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"86"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"Computer"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"77"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"English"</span></span><br><span class="line"><span class="number">6</span>) <span class="string">"69"</span></span><br></pre></td></tr></table></figure>
<p>查询lisi的所有成绩：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; hgetall student.lisi</span><br><span class="line"><span class="number">1</span>) <span class="string">"English"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"55"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"Math"</span></span><br><span class="line"><span class="number">4</span>) <span class="string">"100"</span></span><br><span class="line"><span class="number">5</span>) <span class="string">"Computer"</span></span><br><span class="line"><span class="number">6</span>) <span class="string">"88"</span></span><br></pre></td></tr></table></figure>
<ul>
<li>查询<br>zhangsan的computer成绩</li>
</ul>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span>&gt; hget student.zhangsan Compute</span><br></pre></td></tr></table></figure>
<ul>
<li>修改<br>修改lisi的math成绩为95<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hset student.lisi Math <span class="number">95</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Redis-的java-API操作"><a href="#Redis-的java-API操作" class="headerlink" title="Redis 的java API操作"></a>Redis 的java API操作</h3><p>使用Redis在本机上进行操作需要首先添加一个<a href="https://mvnrepository.com/artifact/redis.clients/jedis/3.3.0" target="_blank" rel="noopener">Jedis的jar包</a><br>在里面进行搜索相应的版本即可。我这里用的是3.3.0版本.<br><strong>a) 添加数据</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ConnTest;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jedis_test</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"127.0.0.1"</span>);</span><br><span class="line">        jedis.hset(<span class="string">"student.scofield"</span>, <span class="string">"English"</span>,<span class="string">"45"</span>);</span><br><span class="line">        jedis.hset(<span class="string">"student.scofield"</span>, <span class="string">"Math"</span>,<span class="string">"89"</span>);</span><br><span class="line">        jedis.hset(<span class="string">"student.scofield"</span>, <span class="string">"Computer"</span>,<span class="string">"100"</span>);</span><br><span class="line">        Map&lt;String,String&gt;  value = jedis.hgetAll(<span class="string">"student.scofield"</span>);</span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;String, String&gt; entry:value.entrySet())</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(entry.getKey()+<span class="string">":"</span>+entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>执行成功之后会显示：<br>Math:89<br>Computer:100<br>English:45<br><strong>b) 获取英语成绩</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ConnTest;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jedis_test</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">            Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"127.0.0.1"</span>);</span><br><span class="line">            String value=jedis.hget(<span class="string">"student.scofield"</span>, <span class="string">"English"</span>);</span><br><span class="line">            System.out.println(<span class="string">"scofield's English score is:    "</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>补充</strong>：如果想要关闭掉Redis的服务器，可以在服务器的登陆成功的界面执行ctrl+C；如果是不小心关掉了界面，在登陆redis的时候发现服务器是开着的，我们又不想让他占用资源，可以通过执行<code>./src/redis-cli shutdown</code>然后查看是否还有redis的进程在活动<code>ps -ef | grep redis</code>，最后找到redis-server的进程号，执行<code>kill -9 进程号</code>。</p>
<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p><a href="https://docs.mongodb.com/manual/" target="_blank" rel="noopener">官方学习网站</a><br>MongoDB 是一个是一个基于分布式文件存储的数据库，介于关系数据库和非关系数据库之间，是非关系数据库当中功能最丰富，最像关系数据库的。他支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。</p>
<h3 id="MongoDB的安装"><a href="#MongoDB的安装" class="headerlink" title="MongoDB的安装"></a>MongoDB的安装</h3><p>mongoDB直接通过apt-get install 就可以安装：<br>首先更新一下软件库。<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></p>
<p>然后在执行安装，这看起来简单多了：<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mongodb</span><br></pre></td></tr></table></figure></p>
<p>最后，检查一下是否安装成功：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb -version</span><br></pre></td></tr></table></figure>
<h3 id="实验操作"><a href="#实验操作" class="headerlink" title="实验操作"></a>实验操作</h3><p>实验操作要求与 mysql的实验要求是一样的。</p>
<ol>
<li>设计完成数据表</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; use student</span><br><span class="line">switched to db student</span><br><span class="line">&gt; var stus=[</span><br><span class="line">... &#123;<span class="string">"name"</span>:<span class="string">"zhangsan"</span>,<span class="string">"scores"</span>:&#123;<span class="string">"English"</span>:<span class="number">69</span>,<span class="string">"Math"</span>:<span class="number">86</span>,<span class="string">"Computer"</span>:<span class="number">77</span>&#125;&#125;,&#123;<span class="string">"name"</span>:<span class="string">"lisi"</span>,<span class="string">"score"</span>:&#123;<span class="string">"English"</span>:<span class="number">55</span>,<span class="string">"Math"</span>:<span class="number">100</span>,<span class="string">"Computer"</span>:<span class="number">88</span>&#125;&#125;]</span><br><span class="line">&gt; db.student.insert(stus)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>查询两个学生的信息</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.student.find().pretty()</span><br></pre></td></tr></table></figure>
<p>查询到的结果为：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"_id"</span> : ObjectId(<span class="string">"5fae58ca036d879c65db8de3"</span>),</span><br><span class="line">	<span class="string">"name"</span> : <span class="string">"zhangsan"</span>,</span><br><span class="line">	<span class="string">"scores"</span> : &#123;</span><br><span class="line">		<span class="string">"English"</span> : <span class="number">69</span>,</span><br><span class="line">		<span class="string">"Math"</span> : <span class="number">86</span>,</span><br><span class="line">		<span class="string">"Computer"</span> : <span class="number">77</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"_id"</span> : ObjectId(<span class="string">"5fae58ca036d879c65db8de4"</span>),</span><br><span class="line">	<span class="string">"name"</span> : <span class="string">"lisi"</span>,</span><br><span class="line">	<span class="string">"score"</span> : &#123;</span><br><span class="line">		<span class="string">"English"</span> : <span class="number">55</span>,</span><br><span class="line">		<span class="string">"Math"</span> : <span class="number">100</span>,</span><br><span class="line">		<span class="string">"Computer"</span> : <span class="number">88</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>查询zhangsan的成绩，只显示成绩</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.student.find(&#123;<span class="string">"name"</span>:<span class="string">"zhangsan"</span>&#125;,&#123;<span class="string">"_id"</span>:<span class="number">0</span>,<span class="string">"name"</span>:<span class="number">0</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>查询结果显示为：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"scores"</span> : &#123; <span class="string">"English"</span> : <span class="number">69</span>, <span class="string">"Math"</span> : <span class="number">86</span>, <span class="string">"Computer"</span> : <span class="number">77</span> &#125; &#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>修改lisi的成绩</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.student.update(&#123;<span class="string">"name"</span>:<span class="string">"lisi"</span>&#125;, &#123;<span class="string">"<span class="variable">$set</span>"</span>:&#123;<span class="string">"score.Math"</span>:<span class="number">95</span>&#125;&#125; )</span><br></pre></td></tr></table></figure>
<p>执行结果为：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WriteResult(&#123; <span class="string">"nMatched"</span> : <span class="number">1</span>, <span class="string">"nUpserted"</span> : <span class="number">0</span>, <span class="string">"nModified"</span> : <span class="number">1</span> &#125;)</span><br></pre></td></tr></table></figure>
<h3 id="用MongoDB的JAVA-API编程"><a href="#用MongoDB的JAVA-API编程" class="headerlink" title="用MongoDB的JAVA API编程"></a>用MongoDB的JAVA API编程</h3><p><a href="https://mvnrepository.com/artifact/org.mongodb/mongo-java-driver" target="_blank" rel="noopener">Mongo DB的驱动包</a><br>将驱动包添加到新创建的项目中。</p>
<ol>
<li>添加数据</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ConnTest;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.bson.Document;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.MongoClient;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.client.MongoCollection;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.client.MongoDatabase;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mongo_test</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="comment">//实例化一个mongo客户端</span></span><br><span class="line">        MongoClient  mongoClient=<span class="keyword">new</span> MongoClient(<span class="string">"127.0.0.1"</span>,<span class="number">27017</span>);</span><br><span class="line">        <span class="comment">//实例化一个mongo数据库</span></span><br><span class="line">        MongoDatabase mongoDatabase = mongoClient.getDatabase(<span class="string">"student"</span>);</span><br><span class="line">        <span class="comment">//获取数据库中某个集合</span></span><br><span class="line">        MongoCollection&lt;Document&gt; collection = mongoDatabase.getCollection(<span class="string">"student"</span>);</span><br><span class="line">        <span class="comment">//实例化一个文档,内嵌一个子文档</span></span><br><span class="line">        Document document=<span class="keyword">new</span> Document(<span class="string">"name"</span>,<span class="string">"scofield"</span>).</span><br><span class="line">                append(<span class="string">"score"</span>, <span class="keyword">new</span> Document(<span class="string">"English"</span>,<span class="number">45</span>).</span><br><span class="line">                        append(<span class="string">"Math"</span>, <span class="number">89</span>).</span><br><span class="line">                        append(<span class="string">"Computer"</span>, <span class="number">100</span>));</span><br><span class="line">        List&lt;Document&gt; documents = <span class="keyword">new</span> ArrayList&lt;Document&gt;();  </span><br><span class="line">        documents.add(document);  </span><br><span class="line">        <span class="comment">//将文档插入集合中</span></span><br><span class="line">        collection.insertMany(documents);  </span><br><span class="line">        System.out.println(<span class="string">"文档插入成功"</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行成功后显示：文档插入成功</p>
<ol start="3">
<li>获取scofield的所有成绩成绩信息（只显示score列）</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.bson.Document;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.MongoClient;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.client.MongoCollection;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.client.MongoCursor;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.client.MongoDatabase;</span><br><span class="line"><span class="keyword">import</span> com.mongodb.client.model.Filters;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.mongodb.client.model.Filters.eq;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">mongo_query</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="comment">//实例化一个mongo客户端</span></span><br><span class="line">        MongoClient  mongoClient=<span class="keyword">new</span> MongoClient(<span class="string">"127.0.0.1"</span>,<span class="number">27017</span>);</span><br><span class="line">        <span class="comment">//实例化一个mongo数据库</span></span><br><span class="line">        MongoDatabase mongoDatabase = mongoClient.getDatabase(<span class="string">"student"</span>);</span><br><span class="line">        <span class="comment">//获取数据库中某个集合</span></span><br><span class="line">        MongoCollection&lt;Document&gt; collection = mongoDatabase.getCollection(<span class="string">"student"</span>);</span><br><span class="line">        <span class="comment">//进行数据查找,查询条件为name=scofield, 对获取的结果集只显示score这个域</span></span><br><span class="line">        MongoCursor&lt;Document&gt;  cursor=collection.find( <span class="keyword">new</span> Document(<span class="string">"name"</span>,<span class="string">"scofield"</span>)).</span><br><span class="line">                projection(<span class="keyword">new</span> Document(<span class="string">"score"</span>,<span class="number">1</span>).append(<span class="string">"_id"</span>, <span class="number">0</span>)).iterator();</span><br><span class="line">        <span class="keyword">while</span>(cursor.hasNext())</span><br><span class="line">            System.out.println(cursor.next().toJson());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        
<div class="counter-tag counter">
    <span id="/2020/11/13/NoSql和关系数据库的操作比较/" class="leancloud_visitors post-title-link" style="font-size: 12px" data-flag-title="NoSql和关系数据库 的操作比较">
         &nbsp;
        view
    </span>
</div>

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2021 Gorge
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>